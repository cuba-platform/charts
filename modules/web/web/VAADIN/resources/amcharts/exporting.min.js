function RGBColor(e){this.ok=false;if(e.charAt(0)=="#"){e=e.substr(1,6)}e=e.replace(/ /g,"");e=e.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in t){if(e==n){e=t[n]}}var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}];for(var i=0;i<r.length;i++){var s=r[i].re;var o=r[i].process;var u=s.exec(e);if(u){channels=o(u);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r;this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g;this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var e=this.r.toString(16);var t=this.g.toString(16);var n=this.b.toString(16);if(e.length==1)e="0"+e;if(t.length==1)t="0"+t;if(n.length==1)n="0"+n;return"#"+e+t+n};this.getHelpXML=function(){var e=new Array;for(var n=0;n<r.length;n++){var i=r[n].example;for(var s=0;s<i.length;s++){e[e.length]=i[s]}}for(var o in t){e[e.length]=o}var u=document.createElement("ul");u.setAttribute("id","rgbcolor-examples");for(var n=0;n<e.length;n++){try{var a=document.createElement("li");var f=new RGBColor(e[n]);var l=document.createElement("div");l.style.cssText="margin: 3px; "+"border: 1px solid black; "+"background:"+f.toHex()+"; "+"color:"+f.toHex();l.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+e[n]+" -> "+f.toRGB()+" -> "+f.toHex());a.appendChild(l);a.appendChild(c);u.appendChild(a)}catch(h){}}return u}}AmCharts.AmExport=AmCharts.Class({construct:function(e,t,n){var r=this;r.DEBUG=false;r.chart=e;r.canvas=null;r.svgs=[];r.userCFG=t;r.buttonIcon="export.png";r.exportPNG=true;r.exportPDF=false;r.exportJPG=false;r.exportSVG=false;r.right=0;r.top=0;r.buttonRollOverColor="#EFEFEF";r.textRollOverColor="#CC0000";r.buttonTitle="Save chart as an image";r.buttonAlpha=.75;r.imageFileName="amChart";r.imageBackgroundColor="#FFFFFF";if(n){r.init()}},toCoordinate:function(e){if(e===undefined){return"auto"}if(String(e).indexOf("%")!=-1){return e}else{return e+"px"}},init:function(){var e=this;var t=[];if(e.exportPNG){t.push("png")}if(e.exportPDF){t.push("pdf")}if(e.exportJPG){t.push("jpg")}if(e.exportSVG){t.push("svg")}var n=[];if(t.length==1){var r=t[0];n.push({format:r,iconTitle:e.buttonTitle,icon:e.chart.pathToImages+e.buttonIcon})}else if(t.length>1){var i=[];for(var s=0;s<t.length;s++){i.push({format:t[s],title:t[s].toUpperCase()})}n.push({onclick:function(){},icon:e.chart.pathToImages+e.buttonIcon,items:i})}var o=e.color;if(o===undefined){o=e.chart.color}var u=e.buttonColor;if(u===undefined){u="transparent"}e.cfg={menuTop:e.toCoordinate(e.top),menuLeft:e.toCoordinate(e.left),menuRight:e.toCoordinate(e.right),menuBottom:e.toCoordinate(e.bottom),menuItems:n,menuItemStyle:{backgroundColor:u,opacity:e.buttonAlpha,rollOverBackgroundColor:e.buttonRollOverColor,color:o,rollOverColor:e.textRollOverColor,paddingTop:"6px",paddingRight:"6px",paddingBottom:"6px",paddingLeft:"6px",marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",textAlign:"left",textDecoration:"none",fontFamily:e.chart.fontFamily,fontSize:e.chart.fontSize+"px"},menuItemOutput:{backgroundColor:e.imageBackgroundColor,fileName:e.imageFileName,format:"png",output:"dataurlnewwindow",render:"browser",dpi:90,onclick:function(e,t,n){n.preventDefault();e.output(t)}},removeImagery:true};e.processing={buffer:[],drawn:0,timer:0};if(typeof window.canvg!="undefined"&&typeof window.RGBColor!="undefined"){e.cfg.menuItemOutput.render="canvg"}if(typeof window.saveAs!="undefined"){e.cfg.menuItemOutput.output="save"}if(AmCharts.isIE&&AmCharts.IEversion<10){e.cfg.menuItemOutput.output="dataurlnewwindow"}var a=e.userCFG;if(a){a.menuItemOutput=AmCharts.extend(e.cfg.menuItemOutput,a.menuItemOutput||{});a.menuItemStyle=AmCharts.extend(e.cfg.menuItemStyle,a.menuItemStyle||{});e.cfg=AmCharts.extend(e.cfg,a)}e.chart.AmExport=e;e.chart.addListener("rendered",function(){e.setup()});if(e.DEBUG){window.AmExport=e}},log:function(){console.log("AmExport: ",arguments)},setup:function(){var e=this;if(!AmCharts.isIE||AmCharts.isIE&&AmCharts.IEversion>9){e.generateButtons()}},generateBinaryArray:function(e){var t=e.length,n=new Uint8Array(t/4*3|0),r=0,i=0,s=[0,0],o=0,u=0,a,f,l,c=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);while(t--){f=e.charCodeAt(r++);a=c[f-43];if(a!==255&&a!==l){s[1]=s[0];s[0]=f;u=u<<6|a;o++;if(o===4){n[i++]=u>>>16;if(s[1]!==61){n[i++]=u>>>8}if(s[0]!==61){n[i++]=u}o=0}}}return n},generateBlob:function(e,t){var n=this,r=t!="image/svg+xml"?e.indexOf(",")+1:0,i=e.substring(0,r),s=e,o=new Blob;if(i.indexOf("base64")!=-1){s=n.generateBinaryArray(e.substring(r))}if(AmCharts.isIE&&AmCharts.IEversion<10){o.data=s;o.size=s.length;o.type=t;o.encoding="base64"}else{o=new Blob([s],{type:t})}return o},generatePDF:function(e){var t=this,n={output:function(){return""}},r=t.canvas.toDataURL("image/jpeg"),i=t.canvas.width*25.4/e.dpi,s=t.canvas.height*25.4/e.dpi;if(window.jsPDF){n=new jsPDF;if(n.addImage){n.addImage(r,"JPEG",0,0,i,s)}else{alert("Missing jsPDF plugin; Please add the 'addImage' plugin.")}}else{alert("Missing jsPDF lib; Don't forget to add the addImage plugin.")}return n},output:function(e,t){function r(){var r=null;var i;if(e.format=="image/svg+xml"||e.format=="svg"){r=n.generateSVG();i=n.generateBlob(r,"image/svg+xml");if(e.output=="save"){saveAs(i,e.fileName+".svg")}else if(e.output=="datastring"||e.output=="datauristring"||e.output=="dataurlstring"){i="data:image/svg+xml;base64,"+btoa(r)}else if(e.output=="dataurlnewwindow"){window.open("data:image/svg+xml;base64,"+btoa(r))}else if(e.output=="datauri"||e.output=="dataurl"){location.href="data:image/svg+xml;base64,"+btoa(r)}else if(e.output=="datastream"){location.href="data:image/octet-stream;base64,"+r}if(t){t.apply(n,[i])}}else if(e.format=="application/pdf"||e.format=="pdf"){r=n.generatePDF(e).output("dataurlstring");i=n.generateBlob(r,"application/pdf");if(e.output=="save"){saveAs(i,e.fileName+".pdf")}else if(e.output=="datastring"||e.output=="datauristring"||e.output=="dataurlstring"){i=r}else if(e.output=="dataurlnewwindow"){window.open(r)}else if(e.output=="datauri"||e.output=="dataurl"){location.href=r}else if(e.output=="datastream"){location.href=r.replace("application/pdf","application/octet-stream")}if(t){t.apply(n,[i])}}else if(e.format=="image/png"||e.format=="png"){r=n.canvas.toDataURL("image/png");i=n.generateBlob(r,"image/png");if(e.output=="save"){saveAs(i,e.fileName+".png")}else if(e.output=="datastring"||e.output=="datauristring"||e.output=="dataurlstring"){i=r}else if(e.output=="dataurlnewwindow"){window.open(r)}else if(e.output=="datauri"||e.output=="dataurl"){location.href=r}else if(e.output=="datastream"){location.href=r.replace("image/png","image/octet-stream")}if(t){t.apply(n,[i])}}else if(e.format=="image/jpeg"||e.format=="jpeg"||e.format=="jpg"){r=n.canvas.toDataURL("image/jpeg");i=n.generateBlob(r,"image/jpeg");if(e.output=="save"){saveAs(i,e.fileName+".jpg")}else if(e.output=="datastring"||e.output=="datauristring"||e.output=="dataurlstring"){i=r}else if(e.output=="dataurlnewwindow"){window.open(r)}else if(e.output=="datauri"||e.output=="dataurl"){location.href=r}else if(e.output=="datastream"){location.href=r.replace("image/jpeg","image/octet-stream")}if(t){t.apply(n,[i])}}}var n=this;e=AmCharts.extend(AmCharts.extend({},n.cfg.menuItemOutput),e||{});if(n.chart.prepareForExport){n.chart.prepareForExport()}return n.generateOutput(e,r)},polifySVG:function(e){function n(e,n){var r=e.getElementsByTagName(n);var i=r.length;while(i--){if(t.cfg.removeImagery){r[i].parentNode.removeChild(r[i])}else{var s=document.createElement("img");var o=document.createElement("canvas");var u=o.getContext("2d");o.width=r[i].getAttribute("width");o.height=r[i].getAttribute("height");s.src=r[i].getAttribute("xlink:href");s.width=r[i].getAttribute("width");s.height=r[i].getAttribute("height");try{u.drawImage(s,0,0,s.width,s.height);datastring=o.toDataURL()}catch(a){datastring=s.src;t.log("Tainted canvas, reached browser CORS security; origin from imagery must be equal to the server!");throw new Error(a)}r[i].setAttribute("xlink:href",datastring)}}}var t=this;if(AmCharts.IEversion==0){e.setAttribute("xmlns","http://www.w3.org/2000/svg");if(!t.cfg.removeImagery){e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")}}n(e,"pattern");n(e,"image");t.svgs.push(e);return e},generateSVG:function(){var e=this;var t=document.createElement("svg");t.setAttribute("xmlns","http://www.w3.org/2000/svg");t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");for(var n=0;n<e.processing.buffer.length;n++){var r=document.createElement("g"),i=e.processing.buffer[n];i[0].setAttribute("xmlns","http://www.w3.org/2000/svg");i[0].setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");r.setAttribute("transform","translate("+i[1].x+","+i[1].y+")");r.appendChild(i[0]);t.appendChild(r)}return(new XMLSerializer).serializeToString(t)},generateOutput:function(e,t){function m(){var r,i,u,a;if(n.processing.buffer.length==n.processing.drawn||e.format=="svg"){return t()}else{i=n.processing.buffer[n.processing.drawn];a=(new XMLSerializer).serializeToString(i[0]);u=i[1];if(e.render=="browser"){r=new Image;r.id=AmCharts.getUniqueId();a="data:image/svg+xml;base64,"+btoa(a);r.onload=function(){o.drawImage(this,i[1].x,i[1].y);n.processing.drawn++;m()};r.onerror=function(){o.drawImage(this,i[1].x,i[1].y);n.processing.drawn++;m()};r.src=a;if(r.complete||typeof r.complete=="undefined"||r.complete===undefined){r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";r.src=a}}else if(e.render=="canvg"){canvg(s,a,{offsetX:u.x,offsetY:u.y,ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,renderCallback:function(){n.processing.drawn++;m()}})}}}var n=this,r=[],i=[],s=document.createElement("canvas"),o=s.getContext("2d"),u={y:0,x:0},r=n.chart.div.getElementsByTagName("svg");for(var a=0;a<r.length;a++)i.push(r[a]);if(n.chart.legend&&n.chart.legend.position=="outside"){n.chart.legend.container.container.externalLegend=true;i.push(n.chart.legend.container.container);if(n.cfg.legendPosition=="left"){u.x=n.chart.legend.div.offsetWidth}else if(n.cfg.legendPosition=="top"){u.y=n.chart.legend.div.offsetHeight}else if(typeof n.cfg.legendPosition=="object"){u.y=n.cfg.legendPosition.chartTop;u.x=n.cfg.legendPosition.chartLeft}}n.processing.buffer=[];n.processing.drawn=0;n.canvas=s;n.svgs=[];var f={x:0,y:0};for(var a=0;a<i.length;a++){var l=i[a].parentNode,c=Number(l.style.left.slice(0,-2)),h=Number(l.style.top.slice(0,-2)),p=n.polifySVG(i[a].cloneNode(true)),d=AmCharts.extend({},u);if(i[a].externalLegend){if(n.cfg.legendPosition=="right"){u.y=0;u.x=n.chart.divRealWidth}else if(n.cfg.legendPosition=="bottom"){u.y=h?h:u.y}else if(typeof n.cfg.legendPosition=="object"){u.x=n.cfg.legendPosition.left;u.y=n.cfg.legendPosition.top}else{u.x=0;u.y=0}}else{if(l.style.position=="relative"){u.x=c?c:u.x;u.y=h?h:u.y}else{u.x=c+f.x;u.y=h+f.y}}n.processing.buffer.push([p,AmCharts.extend({},u)]);if(h&&c){u=d}else{u.y+=h?0:l.offsetHeight}if(l.style.position=="absolute"&&l.getAttribute("class")=="amChartsLegend"){f.y+=l.parentNode.offsetHeight}}s.id=AmCharts.getUniqueId();s.width=n.chart.divRealWidth;s.height=n.chart.divRealHeight;if(n.chart.legend&&n.chart.legend.position=="outside"){if(["left","right"].indexOf(n.cfg.legendPosition)!=-1){s.width+=n.chart.legend.div.offsetWidth}else if(typeof n.cfg.legendPosition=="object"){s.width+=n.cfg.legendPosition.width;s.height+=n.cfg.legendPosition.height}else{s.height+=n.chart.legend.div.offsetHeight}}var v={width:false,height:false};if(n.chart.periodSelector){if(["left","right"].indexOf(n.chart.periodSelector.position)!=-1){s.width-=n.chart.periodSelector.div.offsetWidth+16;v.width=true}else{s.height-=n.chart.periodSelector.div.offsetHeight;v.height=true}}if(n.chart.dataSetSelector){if(["left","right"].indexOf(n.chart.dataSetSelector.position)!=-1){if(!v.width){s.width-=n.chart.dataSetSelector.div.offsetWidth+16}}else{s.height-=n.chart.dataSetSelector.div.offsetHeight}}if(e.backgroundColor||e.format=="image/jpeg"){o.fillStyle=e.backgroundColor||"#FFFFFF";o.fillRect(0,0,s.width,s.height)}return m()},generateButtons:function(){function r(n){var i=document.createElement("ul");i.setAttribute("style","list-style: none; margin: 0; padding: 0;");for(var s=0;s<n.length;s++){var o=document.createElement("li"),u=document.createElement("img"),a=document.createElement("a"),f=n[s],l=null,c=AmCharts.extend(AmCharts.extend({},e.cfg.menuItemStyle),n[s]);f=AmCharts.extend(AmCharts.extend({},e.cfg.menuItemOutput),f);if(f["icon"]){u.alt="";u.src=f["icon"];u.setAttribute("style","margin: 0 auto;border: none;outline: none");if(f["iconTitle"]){u.title=f["iconTitle"]}a.appendChild(u)}a.href="#";if(f["title"]){u.setAttribute("style","margin: 0px 5px;");a.innerHTML+=f.title}a.setAttribute("style","display: block;");AmCharts.extend(a.style,c);a.onclick=f.onclick.bind(a,e,f);o.appendChild(a);if(f.items){l=r(f.items);o.appendChild(l);o.onmouseover=function(){l.style.display="block"};o.onmouseout=function(){l.style.display="none"};l.style.display="none"}i.appendChild(o);a.onmouseover=function(){this.style.backgroundColor=c.rollOverBackgroundColor;this.style.color=c.rollOverColor;this.style.borderColor=c.rollOverBorderColor};a.onmouseout=function(){this.style.backgroundColor=c.backgroundColor;this.style.color=c.color;this.style.borderColor=c.borderColor}}t++;return i}var e=this,t=0;var n;if(e.div){n=e.div;n.innerHTML=""}else{n=document.createElement("div"),e.div=n}n.setAttribute("style","position: absolute;top:"+e.cfg.menuTop+";right:"+e.cfg.menuRight+";bottom:"+e.cfg.menuBottom+";left:"+e.cfg.menuLeft+";");n.setAttribute("class","amExportButton");n.appendChild(r(e.cfg.menuItems));e.chart.containerDiv.appendChild(n)}});if(AmCharts.isModern){var saveAs=saveAs||typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=e.URL||e.webkitURL||e,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s=!e.externalHost&&"download"in i,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},u=e.webkitRequestFileSystem,a=e.requestFileSystem||u||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=[],p=function(){var e=h.length;while(e--){var t=h[e];if(typeof t==="string"){r.revokeObjectURL(t)}else{t.remove()}}h.length=0},d=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){f(s)}}}},v=function(r,o){var f=this,p=r.type,v=false,m,g,y=function(){var e=n().createObjectURL(r);h.push(e);return e},b=function(){d(f,"writestart progress write writeend".split(" "))},w=function(){if(v||!m){m=y(r)}if(g){g.location.href=m}else{window.open(m,"_blank")}f.readyState=f.DONE;b()},E=function(e){return function(){if(f.readyState!==f.DONE){return e.apply(this,arguments)}}},S={create:true,exclusive:false},x;f.readyState=f.INIT;if(!o){o="download"}if(s){m=y(r);t=e.document;i=t.createElementNS("http://www.w3.org/1999/xhtml","a");i.href=m;i.download=o;var T=t.createEvent("MouseEvents");T.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);i.dispatchEvent(T);f.readyState=f.DONE;b();return}if(e.chrome&&p&&p!==l){x=r.slice||r.webkitSlice;r=x.call(r,0,r.size,l);v=true}if(u&&o!=="download"){o+=".download"}if(p===l||u){g=e}if(!a){w();return}c+=r.size;a(e.TEMPORARY,c,E(function(e){e.root.getDirectory("saved",S,E(function(e){var t=function(){e.getFile(o,S,E(function(e){e.createWriter(E(function(t){t.onwriteend=function(t){g.location.href=e.toURL();h.push(e);f.readyState=f.DONE;d(f,"writeend",t)};t.onerror=function(){var e=t.error;if(e.code!==e.ABORT_ERR){w()}};"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=f["on"+e]});t.write(r);f.abort=function(){t.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),w)}),w)};e.getFile(o,{create:false},E(function(e){e.remove();t()}),E(function(e){if(e.code===e.NOT_FOUND_ERR){t()}else{w()}}))}),w)}),w)},m=v.prototype,g=function(e,t){return new v(e,t)};m.abort=function(){var e=this;e.readyState=e.DONE;d(e,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;e.addEventListener("unload",p,false);return g}(this.self||this.window||this.content);if(typeof module!=="undefined")module.exports=saveAs}(function(){function e(){var e={};e.FRAMERATE=30;e.MAX_VIRTUAL_PIXELS=3e4;e.init=function(t){var n=0;e.UniqueId=function(){n++;return"canvg"+n};e.Definitions={};e.Styles={};e.Animations=[];e.Images=[];e.ctx=t;e.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(e,t){this.viewPorts.push({width:e,height:t})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(e){if(e!=null&&typeof e=="number")return e;if(e=="x")return this.width();if(e=="y")return this.height();return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}};e.init();e.ImagesLoaded=function(){for(var t=0;t<e.Images.length;t++){if(!e.Images[t].loaded)return false}return true};e.trim=function(e){return e.replace(/^\s+|\s+$/g,"")};e.compressSpaces=function(e){return e.replace(/[\s\r\t\n]+/gm," ")};e.ajax=function(e){var t;if(window.XMLHttpRequest){t=new XMLHttpRequest}else{t=new ActiveXObject("Microsoft.XMLHTTP")}if(t){t.open("GET",e,false);t.send(null);return t.responseText}return null};e.parseXml=function(e){if(window.DOMParser){var t=new DOMParser;return t.parseFromString(e,"text/xml")}else{e=e.replace(/<!DOCTYPE svg[^>]*>/,"");var n=new ActiveXObject("Microsoft.XMLDOM");n.async="false";n.loadXML(e);return n}};e.Property=function(e,t){this.name=e;this.value=t};e.Property.prototype.getValue=function(){return this.value};e.Property.prototype.hasValue=function(){return this.value!=null&&this.value!==""};e.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var e=parseFloat(this.value);if((this.value+"").match(/%$/)){e=e/100}return e};e.Property.prototype.valueOrDefault=function(e){if(this.hasValue())return this.value;return e};e.Property.prototype.numValueOrDefault=function(e){if(this.hasValue())return this.numValue();return e};e.Property.prototype.addOpacity=function(t){var n=this.value;if(t!=null&&t!=""&&typeof this.value=="string"){var r=new RGBColor(this.value);if(r.ok){n="rgba("+r.r+", "+r.g+", "+r.b+", "+t+")"}}return new e.Property(this.name,n)};e.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);if(t){t=t[1]}if(!t){t=this.value}return e.Definitions[t]};e.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0};e.Property.prototype.getFillStyleDefinition=function(t,n){var r=this.getDefinition();if(r!=null&&r.createGradient){return r.createGradient(e.ctx,t,n)}if(r!=null&&r.createPattern){if(r.getHrefAttribute().hasValue()){var i=r.attribute("patternTransform");r=r.getHrefAttribute().getDefinition();if(i.hasValue()){r.attribute("patternTransform",true).value=i.value}}return r.createPattern(e.ctx,t)}return null};e.Property.prototype.getDPI=function(e){return 96};e.Property.prototype.getEM=function(t){var n=12;var r=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);if(r.hasValue())n=r.toPixels(t);return n};e.Property.prototype.getUnits=function(){var e=this.value+"";return e.replace(/[0-9\.\-]/g,"")};e.Property.prototype.toPixels=function(t,n){if(!this.hasValue())return 0;var r=this.value+"";if(r.match(/em$/))return this.numValue()*this.getEM(t);if(r.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(r.match(/px$/))return this.numValue();if(r.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(r.match(/pc$/))return this.numValue()*15;if(r.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(r.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(r.match(/in$/))return this.numValue()*this.getDPI(t);if(r.match(/%$/))return this.numValue()*e.ViewPort.ComputeSize(t);var i=this.numValue();if(n&&i<1)return i*e.ViewPort.ComputeSize(t);return i};e.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var e=this.value+"";if(e.match(/s$/))return this.numValue()*1e3;if(e.match(/ms$/))return this.numValue();return this.numValue()};e.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var e=this.value+"";if(e.match(/deg$/))return this.numValue()*(Math.PI/180);if(e.match(/grad$/))return this.numValue()*(Math.PI/200);if(e.match(/rad$/))return this.numValue();return this.numValue()*(Math.PI/180)};e.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(t,n,r,i,s,o){var u=o!=null?this.Parse(o):this.CreateFont("","","","","",e.ctx.font);return{fontFamily:s||u.fontFamily,fontSize:i||u.fontSize,fontStyle:t||u.fontStyle,fontWeight:r||u.fontWeight,fontVariant:n||u.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(n){var r={};var i=e.trim(e.compressSpaces(n||"")).split(" ");var s={fontSize:false,fontStyle:false,fontWeight:false,fontVariant:false};var o="";for(var u=0;u<i.length;u++){if(!s.fontStyle&&t.Styles.indexOf(i[u])!=-1){if(i[u]!="inherit")r.fontStyle=i[u];s.fontStyle=true}else if(!s.fontVariant&&t.Variants.indexOf(i[u])!=-1){if(i[u]!="inherit")r.fontVariant=i[u];s.fontStyle=s.fontVariant=true}else if(!s.fontWeight&&t.Weights.indexOf(i[u])!=-1){if(i[u]!="inherit")r.fontWeight=i[u];s.fontStyle=s.fontVariant=s.fontWeight=true}else if(!s.fontSize){if(i[u]!="inherit")r.fontSize=i[u].split("/")[0];s.fontStyle=s.fontVariant=s.fontWeight=s.fontSize=true}else{if(i[u]!="inherit")o+=i[u]}}if(o!="")r.fontFamily=o;return r}};e.ToNumberArray=function(t){var n=e.trim(e.compressSpaces((t||"").replace(/,/g," "))).split(" ");for(var r=0;r<n.length;r++){n[r]=parseFloat(n[r])}return n};e.Point=function(e,t){this.x=e;this.y=t};e.Point.prototype.angleTo=function(e){return Math.atan2(e.y-this.y,e.x-this.x)};e.Point.prototype.applyTransform=function(e){var t=this.x*e[0]+this.y*e[2]+e[4];var n=this.x*e[1]+this.y*e[3]+e[5];this.x=t;this.y=n};e.CreatePoint=function(t){var n=e.ToNumberArray(t);return new e.Point(n[0],n[1])};e.CreatePath=function(t){var n=e.ToNumberArray(t);var r=[];for(var i=0;i<n.length;i+=2){r.push(new e.Point(n[i],n[i+1]))}return r};e.BoundingBox=function(e,t,n,r){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(e,t){if(e!=null){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=e;this.x2=e}if(e<this.x1)this.x1=e;if(e>this.x2)this.x2=e}if(t!=null){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=t;this.y2=t}if(t<this.y1)this.y1=t;if(t>this.y2)this.y2=t}};this.addX=function(e){this.addPoint(e,null)};this.addY=function(e){this.addPoint(null,e)};this.addBoundingBox=function(e){this.addPoint(e.x1,e.y1);this.addPoint(e.x2,e.y2)};this.addQuadraticCurve=function(e,t,n,r,i,s){var o=e+2/3*(n-e);var u=t+2/3*(r-t);var a=o+1/3*(i-e);var f=u+1/3*(s-t);this.addBezierCurve(e,t,o,a,u,f,i,s)};this.addBezierCurve=function(e,t,n,r,s,o,u,a){var f=[e,t],l=[n,r],c=[s,o],h=[u,a];this.addPoint(f[0],f[1]);this.addPoint(h[0],h[1]);for(i=0;i<=1;i++){var p=function(e){return Math.pow(1-e,3)*f[i]+3*Math.pow(1-e,2)*e*l[i]+3*(1-e)*Math.pow(e,2)*c[i]+Math.pow(e,3)*h[i]};var d=6*f[i]-12*l[i]+6*c[i];var v=-3*f[i]+9*l[i]-9*c[i]+3*h[i];var m=3*l[i]-3*f[i];if(v==0){if(d==0)continue;var g=-m/d;if(0<g&&g<1){if(i==0)this.addX(p(g));if(i==1)this.addY(p(g))}continue}var y=Math.pow(d,2)-4*m*v;if(y<0)continue;var b=(-d+Math.sqrt(y))/(2*v);if(0<b&&b<1){if(i==0)this.addX(p(b));if(i==1)this.addY(p(b))}var w=(-d-Math.sqrt(y))/(2*v);if(0<w&&w<1){if(i==0)this.addX(p(w));if(i==1)this.addY(p(w))}}};this.isPointInBox=function(e,t){return this.x1<=e&&e<=this.x2&&this.y1<=t&&t<=this.y2};this.addPoint(e,t);this.addPoint(n,r)};e.Transform=function(t){var n=this;this.Type={};this.Type.translate=function(t){this.p=e.CreatePoint(t);this.apply=function(e){e.translate(this.p.x||0,this.p.y||0)};this.unapply=function(e){e.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(e){e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(t){var n=e.ToNumberArray(t);this.angle=new e.Property("angle",n[0]);this.cx=n[1]||0;this.cy=n[2]||0;this.apply=function(e){e.translate(this.cx,this.cy);e.rotate(this.angle.toRadians());e.translate(-this.cx,-this.cy)};this.unapply=function(e){e.translate(this.cx,this.cy);e.rotate(-1*this.angle.toRadians());e.translate(-this.cx,-this.cy)};this.applyToPoint=function(e){var t=this.angle.toRadians();e.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);e.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]);e.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(t){this.p=e.CreatePoint(t);this.apply=function(e){e.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(e){e.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(e){e.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(t){this.m=e.ToNumberArray(t);this.apply=function(e){e.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(e){e.applyTransform(this.m)}};this.Type.SkewBase=function(t){this.base=n.Type.matrix;this.base(t);this.angle=new e.Property("angle",t)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(e){this.base=n.Type.SkewBase;this.base(e);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(e){this.base=n.Type.SkewBase;this.base(e);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(e){for(var t=0;t<this.transforms.length;t++){this.transforms[t].apply(e)}};this.unapply=function(e){for(var t=this.transforms.length-1;t>=0;t--){this.transforms[t].unapply(e)}};this.applyToPoint=function(e){for(var t=0;t<this.transforms.length;t++){this.transforms[t].applyToPoint(e)}};var r=e.trim(e.compressSpaces(t)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var i=0;i<r.length;i++){var s=e.trim(r[i].split("(")[0]);var o=r[i].split("(")[1].replace(")","");var u=new this.Type[s](o);u.type=s;this.transforms.push(u)}};e.AspectRatio=function(t,n,r,i,s,o,u,a,f,l){n=e.compressSpaces(n);n=n.replace(/^defer\s/,"");var c=n.split(" ")[0]||"xMidYMid";var h=n.split(" ")[1]||"meet";var p=r/i;var d=s/o;var v=Math.min(p,d);var m=Math.max(p,d);if(h=="meet"){i*=v;o*=v}if(h=="slice"){i*=m;o*=m}f=new e.Property("refX",f);l=new e.Property("refY",l);if(f.hasValue()&&l.hasValue()){t.translate(-v*f.toPixels("x"),-v*l.toPixels("y"))}else{if(c.match(/^xMid/)&&(h=="meet"&&v==d||h=="slice"&&m==d))t.translate(r/2-i/2,0);if(c.match(/YMid$/)&&(h=="meet"&&v==p||h=="slice"&&m==p))t.translate(0,s/2-o/2);if(c.match(/^xMax/)&&(h=="meet"&&v==d||h=="slice"&&m==d))t.translate(r-i,0);if(c.match(/YMax$/)&&(h=="meet"&&v==p||h=="slice"&&m==p))t.translate(0,s-o)}if(c=="none")t.scale(p,d);else if(h=="meet")t.scale(v,v);else if(h=="slice")t.scale(m,m);t.translate(u==null?0:-u,a==null?0:-a)};e.Element={};e.EmptyProperty=new e.Property("EMPTY","");e.Element.ElementBase=function(t){this.attributes={};this.styles={};this.children=[];this.attribute=function(t,n){var r=this.attributes[t];if(r!=null)return r;if(n==true){r=new e.Property(t,"");this.attributes[t]=r}return r||e.EmptyProperty};this.getHrefAttribute=function(){for(var t in this.attributes){if(t.match(/:href$/)){return this.attributes[t]}}return e.EmptyProperty};this.style=function(t,n){var r=this.styles[t];if(r!=null)return r;var i=this.attribute(t);if(i!=null&&i.hasValue()){this.styles[t]=i;return i}var s=this.parent;if(s!=null){var o=s.style(t);if(o!=null&&o.hasValue()){return o}}if(n==true){r=new e.Property(t,"");this.styles[t]=r}return r||e.EmptyProperty};this.render=function(e){if(this.style("display").value=="none")return;if(this.attribute("visibility").value=="hidden")return;e.save();if(this.attribute("mask").hasValue()){var t=this.attribute("mask").getDefinition();if(t!=null)t.apply(e,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();if(n!=null)n.apply(e,this)}else{this.setContext(e);this.renderChildren(e);this.clearContext(e)}e.restore()};this.setContext=function(e){};this.clearContext=function(e){};this.renderChildren=function(e){for(var t=0;t<this.children.length;t++){this.children[t].render(e)}};this.addChild=function(t,n){var r=t;if(n)r=e.CreateElement(t);r.parent=this;this.children.push(r)};if(t!=null&&t.nodeType==1){for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(r.nodeType==1)this.addChild(r,true);if(this.captureTextNodes&&r.nodeType==3){var i=r.nodeValue||r.text||"";if(e.trim(e.compressSpaces(i))!=""){this.addChild(new e.Element.tspan(r),false)}}}for(var n=0;n<t.attributes.length;n++){var s=t.attributes[n];this.attributes[s.nodeName]=new e.Property(s.nodeName,s.nodeValue)}var o=e.Styles[t.nodeName];if(o!=null){for(var u in o){this.styles[u]=o[u]}}if(this.attribute("class").hasValue()){var a=e.compressSpaces(this.attribute("class").value).split(" ");for(var f=0;f<a.length;f++){o=e.Styles["."+a[f]];if(o!=null){for(var u in o){this.styles[u]=o[u]}}o=e.Styles[t.nodeName+"."+a[f]];if(o!=null){for(var u in o){this.styles[u]=o[u]}}}}if(this.attribute("id").hasValue()){var o=e.Styles["#"+this.attribute("id").value];if(o!=null){for(var u in o){this.styles[u]=o[u]}}}if(this.attribute("style").hasValue()){var o=this.attribute("style").value.split(";");for(var n=0;n<o.length;n++){if(e.trim(o[n])!=""){var l=o[n].split(":");var u=e.trim(l[0]);var c=e.trim(l[1]);this.styles[u]=new e.Property(u,c)}}}if(this.attribute("id").hasValue()){if(e.Definitions[this.attribute("id").value]==null){e.Definitions[this.attribute("id").value]=this}}}};e.Element.RenderedElementBase=function(t){this.base=e.Element.ElementBase;this.base(t);this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));if(n!=null)t.fillStyle=n}else if(this.style("fill").hasValue()){var r=this.style("fill");if(r.value=="currentColor")r.value=this.style("color").value;t.fillStyle=r.value=="none"?"rgba(0,0,0,0)":r.value}if(this.style("fill-opacity").hasValue()){var r=new e.Property("fill",t.fillStyle);r=r.addOpacity(this.style("fill-opacity").value);t.fillStyle=r.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));if(n!=null)t.strokeStyle=n}else if(this.style("stroke").hasValue()){var i=this.style("stroke");if(i.value=="currentColor")i.value=this.style("color").value;t.strokeStyle=i.value=="none"?"rgba(0,0,0,0)":i.value}if(this.style("stroke-opacity").hasValue()){var i=new e.Property("stroke",t.strokeStyle);i=i.addOpacity(this.style("stroke-opacity").value);t.strokeStyle=i.value}if(this.style("stroke-width").hasValue()){var s=this.style("stroke-width").toPixels();t.lineWidth=s==0?.001:s}if(this.style("stroke-linecap").hasValue())t.lineCap=this.style("stroke-linecap").value;if(this.style("stroke-linejoin").hasValue())t.lineJoin=this.style("stroke-linejoin").value;if(this.style("stroke-miterlimit").hasValue())t.miterLimit=this.style("stroke-miterlimit").value;if(this.style("stroke-dasharray").hasValue()){var o=e.ToNumberArray(this.style("stroke-dasharray").value);if(typeof t.setLineDash!="undefined"){t.setLineDash(o)}else if(typeof t.webkitLineDash!="undefined"){t.webkitLineDash=o}else if(typeof t.mozDash!="undefined"){t.mozDash=o}var u=this.style("stroke-dashoffset").numValueOrDefault(1);if(typeof t.lineDashOffset!="undefined"){t.lineDashOffset=u}else if(typeof t.webkitLineDashOffset!="undefined"){t.webkitLineDashOffset=u}else if(typeof t.mozDashOffset!="undefined"){t.mozDashOffset=u}}if(typeof t.font!="undefined"){t.font=e.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()}if(this.attribute("transform").hasValue()){var a=new e.Transform(this.attribute("transform").value);a.apply(t)}if(this.style("clip-path").hasValue()){var f=this.style("clip-path").getDefinition();if(f!=null)f.apply(t)}if(this.style("opacity").hasValue()){t.globalAlpha=this.style("opacity").numValue()}}};e.Element.RenderedElementBase.prototype=new e.Element.ElementBase;e.Element.PathElementBase=function(t){this.base=e.Element.RenderedElementBase;this.base(t);this.path=function(t){if(t!=null)t.beginPath();return new e.BoundingBox};this.renderChildren=function(t){this.path(t);e.Mouse.checkPath(this,t);if(t.fillStyle!=""){if(this.attribute("fill-rule").hasValue()){t.fill(this.attribute("fill-rule").value)}else{t.fill()}}if(t.strokeStyle!="")t.stroke();var n=this.getMarkers();if(n!=null){if(this.style("marker-start").isUrlDefinition()){var r=this.style("marker-start").getDefinition();r.render(t,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition()){var r=this.style("marker-mid").getDefinition();for(var i=1;i<n.length-1;i++){r.render(t,n[i][0],n[i][1])}}if(this.style("marker-end").isUrlDefinition()){var r=this.style("marker-end").getDefinition();r.render(t,n[n.length-1][0],n[n.length-1][1])}}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};e.Element.PathElementBase.prototype=new e.Element.RenderedElementBase;e.Element.svg=function(t){this.base=e.Element.RenderedElementBase;this.base(t);this.baseClearContext=this.clearContext;this.clearContext=function(t){this.baseClearContext(t);e.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)";t.lineCap="butt";t.lineJoin="miter";t.miterLimit=4;this.baseSetContext(t);if(!this.attribute("x").hasValue())this.attribute("x",true).value=0;if(!this.attribute("y").hasValue())this.attribute("y",true).value=0;t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=e.ViewPort.width();var r=e.ViewPort.height();if(!this.attribute("width").hasValue())this.attribute("width",true).value="100%";if(!this.attribute("height").hasValue())this.attribute("height",true).value="100%";if(typeof this.root=="undefined"){n=this.attribute("width").toPixels("x");r=this.attribute("height").toPixels("y");var i=0;var s=0;if(this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()){i=-this.attribute("refX").toPixels("x");s=-this.attribute("refY").toPixels("y")}t.beginPath();t.moveTo(i,s);t.lineTo(n,s);t.lineTo(n,r);t.lineTo(i,r);t.closePath();t.clip()}e.ViewPort.SetCurrent(n,r);if(this.attribute("viewBox").hasValue()){var o=e.ToNumberArray(this.attribute("viewBox").value);var u=o[0];var a=o[1];n=o[2];r=o[3];e.AspectRatio(t,this.attribute("preserveAspectRatio").value,e.ViewPort.width(),n,e.ViewPort.height(),r,u,a,this.attribute("refX").value,this.attribute("refY").value);e.ViewPort.RemoveCurrent();e.ViewPort.SetCurrent(o[2],o[3])}}};e.Element.svg.prototype=new e.Element.RenderedElementBase;e.Element.rect=function(t){this.base=e.Element.PathElementBase;this.base(t);this.path=function(t){var n=this.attribute("x").toPixels("x");var r=this.attribute("y").toPixels("y");var i=this.attribute("width").toPixels("x");var s=this.attribute("height").toPixels("y");var o=this.attribute("rx").toPixels("x");var u=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue())u=o;if(this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue())o=u;o=Math.min(o,i/2);u=Math.min(u,s/2);if(t!=null){t.beginPath();t.moveTo(n+o,r);t.lineTo(n+i-o,r);t.quadraticCurveTo(n+i,r,n+i,r+u);t.lineTo(n+i,r+s-u);t.quadraticCurveTo(n+i,r+s,n+i-o,r+s);t.lineTo(n+o,r+s);t.quadraticCurveTo(n,r+s,n,r+s-u);t.lineTo(n,r+u);t.quadraticCurveTo(n,r,n+o,r);t.closePath()}return new e.BoundingBox(n,r,n+i,r+s)}};e.Element.rect.prototype=new e.Element.PathElementBase;e.Element.circle=function(t){this.base=e.Element.PathElementBase;this.base(t);this.path=function(t){var n=this.attribute("cx").toPixels("x");var r=this.attribute("cy").toPixels("y");var i=this.attribute("r").toPixels();if(t!=null){t.beginPath();t.arc(n,r,i,0,Math.PI*2,true);t.closePath()}return new e.BoundingBox(n-i,r-i,n+i,r+i)}};e.Element.circle.prototype=new e.Element.PathElementBase;e.Element.ellipse=function(t){this.base=e.Element.PathElementBase;this.base(t);this.path=function(t){var n=4*((Math.sqrt(2)-1)/3);var r=this.attribute("rx").toPixels("x");var i=this.attribute("ry").toPixels("y");var s=this.attribute("cx").toPixels("x");var o=this.attribute("cy").toPixels("y");if(t!=null){t.beginPath();t.moveTo(s,o-i);t.bezierCurveTo(s+n*r,o-i,s+r,o-n*i,s+r,o);t.bezierCurveTo(s+r,o+n*i,s+n*r,o+i,s,o+i);t.bezierCurveTo(s-n*r,o+i,s-r,o+n*i,s-r,o);t.bezierCurveTo(s-r,o-n*i,s-n*r,o-i,s,o-i);t.closePath()}return new e.BoundingBox(s-r,o-i,s+r,o+i)}};e.Element.ellipse.prototype=new e.Element.PathElementBase;e.Element.line=function(t){this.base=e.Element.PathElementBase;this.base(t);this.getPoints=function(){return[new e.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new e.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(t){var n=this.getPoints();if(t!=null){t.beginPath();t.moveTo(n[0].x,n[0].y);t.lineTo(n[1].x,n[1].y)}return new e.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)};this.getMarkers=function(){var e=this.getPoints();var t=e[0].angleTo(e[1]);return[[e[0],t],[e[1],t]]}};e.Element.line.prototype=new e.Element.PathElementBase;e.Element.polyline=function(t){this.base=e.Element.PathElementBase;this.base(t);this.points=e.CreatePath(this.attribute("points").value);this.path=function(t){var n=new e.BoundingBox(this.points[0].x,this.points[0].y);if(t!=null){t.beginPath();t.moveTo(this.points[0].x,this.points[0].y)}for(var r=1;r<this.points.length;r++){n.addPoint(this.points[r].x,this.points[r].y);if(t!=null)t.lineTo(this.points[r].x,this.points[r].y)}return n};this.getMarkers=function(){var e=[];for(var t=0;t<this.points.length-1;t++){e.push([this.points[t],this.points[t].angleTo(this.points[t+1])])}e.push([this.points[this.points.length-1],e[e.length-1][1]]);return e}};e.Element.polyline.prototype=new e.Element.PathElementBase;e.Element.polygon=function(t){this.base=e.Element.polyline;this.base(t);this.basePath=this.path;this.path=function(e){var t=this.basePath(e);if(e!=null){e.lineTo(this.points[0].x,this.points[0].y);e.closePath()}return t}};e.Element.polygon.prototype=new e.Element.polyline;e.Element.path=function(t){this.base=e.Element.PathElementBase;this.base(t);var n=this.attribute("d").value;n=n.replace(/,/gm," ");n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");n=n.replace(/([0-9])([+\-])/gm,"$1 $2");n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");n=e.compressSpaces(n);n=e.trim(n);this.PathParser=new function(t){this.tokens=t.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new e.Point(0,0);this.control=new e.Point(0,0);this.current=new e.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){if(this.isEnd())return true;return this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return true;break}return false};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var t=new e.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)};this.getAsControlPoint=function(){var e=this.getPoint();this.control=e;return e};this.getAsCurrentPoint=function(){var e=this.getPoint();this.current=e;return e};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t"){return this.current}var t=new e.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t};this.makeAbsolute=function(e){if(this.isRelativeCommand()){e.x+=this.current.x;e.y+=this.current.y}return e};this.addMarker=function(e,t,n){if(n!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null){this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)}this.addMarkerAngle(e,t==null?null:t.angleTo(e))};this.addMarkerAngle=function(e,t){this.points.push(e);this.angles.push(t)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var e=0;e<this.angles.length;e++){if(this.angles[e]==null){for(var t=e+1;t<this.angles.length;t++){if(this.angles[t]!=null){this.angles[e]=this.angles[t];break}}}}return this.angles}}(n);this.path=function(t){var n=this.PathParser;n.reset();var r=new e.BoundingBox;if(t!=null)t.beginPath();while(!n.isEnd()){n.nextCommand();switch(n.command){case"M":case"m":var i=n.getAsCurrentPoint();n.addMarker(i);r.addPoint(i.x,i.y);if(t!=null)t.moveTo(i.x,i.y);n.start=n.current;while(!n.isCommandOrEnd()){var i=n.getAsCurrentPoint();n.addMarker(i,n.start);r.addPoint(i.x,i.y);if(t!=null)t.lineTo(i.x,i.y)}break;case"L":case"l":while(!n.isCommandOrEnd()){var s=n.current;var i=n.getAsCurrentPoint();n.addMarker(i,s);r.addPoint(i.x,i.y);if(t!=null)t.lineTo(i.x,i.y)}break;case"H":case"h":while(!n.isCommandOrEnd()){var o=new e.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(o,n.current);n.current=o;r.addPoint(n.current.x,n.current.y);if(t!=null)t.lineTo(n.current.x,n.current.y)}break;case"V":case"v":while(!n.isCommandOrEnd()){var o=new e.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(o,n.current);n.current=o;r.addPoint(n.current.x,n.current.y);if(t!=null)t.lineTo(n.current.x,n.current.y)}break;case"C":case"c":while(!n.isCommandOrEnd()){var u=n.current;var a=n.getPoint();var f=n.getAsControlPoint();var l=n.getAsCurrentPoint();n.addMarker(l,f,a);r.addBezierCurve(u.x,u.y,a.x,a.y,f.x,f.y,l.x,l.y);if(t!=null)t.bezierCurveTo(a.x,a.y,f.x,f.y,l.x,l.y)}break;case"S":case"s":while(!n.isCommandOrEnd()){var u=n.current;var a=n.getReflectedControlPoint();var f=n.getAsControlPoint();var l=n.getAsCurrentPoint();n.addMarker(l,f,a);r.addBezierCurve(u.x,u.y,a.x,a.y,f.x,f.y,l.x,l.y);if(t!=null)t.bezierCurveTo(a.x,a.y,f.x,f.y,l.x,l.y)}break;case"Q":case"q":while(!n.isCommandOrEnd()){var u=n.current;var f=n.getAsControlPoint();var l=n.getAsCurrentPoint();n.addMarker(l,f,f);r.addQuadraticCurve(u.x,u.y,f.x,f.y,l.x,l.y);if(t!=null)t.quadraticCurveTo(f.x,f.y,l.x,l.y)}break;case"T":case"t":while(!n.isCommandOrEnd()){var u=n.current;var f=n.getReflectedControlPoint();n.control=f;var l=n.getAsCurrentPoint();n.addMarker(l,f,f);r.addQuadraticCurve(u.x,u.y,f.x,f.y,l.x,l.y);if(t!=null)t.quadraticCurveTo(f.x,f.y,l.x,l.y)}break;case"A":case"a":while(!n.isCommandOrEnd()){var u=n.current;var c=n.getScalar();var h=n.getScalar();var p=n.getScalar()*(Math.PI/180);var d=n.getScalar();var v=n.getScalar();var l=n.getAsCurrentPoint();var m=new e.Point(Math.cos(p)*(u.x-l.x)/2+Math.sin(p)*(u.y-l.y)/2,-Math.sin(p)*(u.x-l.x)/2+Math.cos(p)*(u.y-l.y)/2);var g=Math.pow(m.x,2)/Math.pow(c,2)+Math.pow(m.y,2)/Math.pow(h,2);if(g>1){c*=Math.sqrt(g);h*=Math.sqrt(g)}var y=(d==v?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(h,2)-Math.pow(c,2)*Math.pow(m.y,2)-Math.pow(h,2)*Math.pow(m.x,2))/(Math.pow(c,2)*Math.pow(m.y,2)+Math.pow(h,2)*Math.pow(m.x,2)));if(isNaN(y))y=0;var b=new e.Point(y*c*m.y/h,y*-h*m.x/c);var w=new e.Point((u.x+l.x)/2+Math.cos(p)*b.x-Math.sin(p)*b.y,(u.y+l.y)/2+Math.sin(p)*b.x+Math.cos(p)*b.y);var E=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))};var S=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(E(e)*E(t))};var x=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(S(e,t))};var T=x([1,0],[(m.x-b.x)/c,(m.y-b.y)/h]);var N=[(m.x-b.x)/c,(m.y-b.y)/h];var C=[(-m.x-b.x)/c,(-m.y-b.y)/h];var k=x(N,C);if(S(N,C)<=-1)k=Math.PI;if(S(N,C)>=1)k=0;var L=1-v?1:-1;var A=T+L*(k/2);var O=new e.Point(w.x+c*Math.cos(A),w.y+h*Math.sin(A));n.addMarkerAngle(O,A-L*Math.PI/2);n.addMarkerAngle(l,A-L*Math.PI);r.addPoint(l.x,l.y);if(t!=null){var S=c>h?c:h;var M=c>h?1:c/h;var _=c>h?h/c:1;t.translate(w.x,w.y);t.rotate(p);t.scale(M,_);t.arc(0,0,S,T,T+k,1-v);t.scale(1/M,1/_);t.rotate(-p);t.translate(-w.x,-w.y)}}break;case"Z":case"z":if(t!=null)t.closePath();n.current=n.start}}return r};this.getMarkers=function(){var e=this.PathParser.getMarkerPoints();var t=this.PathParser.getMarkerAngles();var n=[];for(var r=0;r<e.length;r++){n.push([e[r],t[r]])}return n}};e.Element.path.prototype=new e.Element.PathElementBase;e.Element.pattern=function(t){this.base=e.Element.ElementBase;this.base(t);this.createPattern=function(t,n){var r=this.attribute("width").toPixels("x",true);var i=this.attribute("height").toPixels("y",true);var s=new e.Element.svg;s.attributes["viewBox"]=new e.Property("viewBox",this.attribute("viewBox").value);s.attributes["width"]=new e.Property("width",r+"px");s.attributes["height"]=new e.Property("height",i+"px");s.attributes["transform"]=new e.Property("transform",this.attribute("patternTransform").value);s.children=this.children;var o=document.createElement("canvas");o.width=r;o.height=i;var u=o.getContext("2d");if(this.attribute("x").hasValue()&&this.attribute("y").hasValue()){u.translate(this.attribute("x").toPixels("x",true),this.attribute("y").toPixels("y",true))}for(var a=-1;a<=1;a++){for(var f=-1;f<=1;f++){u.save();u.translate(a*o.width,f*o.height);s.render(u);u.restore()}}var l=t.createPattern(o,"repeat");return l}};e.Element.pattern.prototype=new e.Element.ElementBase;e.Element.marker=function(t){this.base=e.Element.ElementBase;this.base(t);this.baseRender=this.render;this.render=function(t,n,r){t.translate(n.x,n.y);if(this.attribute("orient").valueOrDefault("auto")=="auto")t.rotate(r);if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth")t.scale(t.lineWidth,t.lineWidth);t.save();var i=new e.Element.svg;i.attributes["viewBox"]=new e.Property("viewBox",this.attribute("viewBox").value);i.attributes["refX"]=new e.Property("refX",this.attribute("refX").value);i.attributes["refY"]=new e.Property("refY",this.attribute("refY").value);i.attributes["width"]=new e.Property("width",this.attribute("markerWidth").value);i.attributes["height"]=new e.Property("height",this.attribute("markerHeight").value);i.attributes["fill"]=new e.Property("fill",this.attribute("fill").valueOrDefault("black"));i.attributes["stroke"]=new e.Property("stroke",this.attribute("stroke").valueOrDefault("none"));i.children=this.children;i.render(t);t.restore();if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth")t.scale(1/t.lineWidth,1/t.lineWidth);if(this.attribute("orient").valueOrDefault("auto")=="auto")t.rotate(-r);t.translate(-n.x,-n.y)}};e.Element.marker.prototype=new e.Element.ElementBase;e.Element.defs=function(t){this.base=e.Element.ElementBase;this.base(t);this.render=function(e){}};e.Element.defs.prototype=new e.Element.ElementBase;e.Element.GradientBase=function(t){this.base=e.Element.ElementBase;this.base(t);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(var n=0;n<this.children.length;n++){var r=this.children[n];if(r.type=="stop")this.stops.push(r)}this.getGradient=function(){};this.createGradient=function(t,n,r){var i=this;if(this.getHrefAttribute().hasValue()){i=this.getHrefAttribute().getDefinition()}var s=function(t){if(r.hasValue()){var n=new e.Property("color",t);return n.addOpacity(r.value).value}return t};var o=this.getGradient(t,n);if(o==null)return s(i.stops[i.stops.length-1].color);for(var u=0;u<i.stops.length;u++){o.addColorStop(i.stops[u].offset,s(i.stops[u].color))}if(this.attribute("gradientTransform").hasValue()){var a=e.ViewPort.viewPorts[0];var f=new e.Element.rect;f.attributes["x"]=new e.Property("x",-e.MAX_VIRTUAL_PIXELS/3);f.attributes["y"]=new e.Property("y",-e.MAX_VIRTUAL_PIXELS/3);f.attributes["width"]=new e.Property("width",e.MAX_VIRTUAL_PIXELS);f.attributes["height"]=new e.Property("height",e.MAX_VIRTUAL_PIXELS);var l=new e.Element.g;l.attributes["transform"]=new e.Property("transform",this.attribute("gradientTransform").value);l.children=[f];var c=new e.Element.svg;c.attributes["x"]=new e.Property("x",0);c.attributes["y"]=new e.Property("y",0);c.attributes["width"]=new e.Property("width",a.width);c.attributes["height"]=new e.Property("height",a.height);c.children=[l];var h=document.createElement("canvas");h.width=a.width;h.height=a.height;var p=h.getContext("2d");p.fillStyle=o;c.render(p);return p.createPattern(h,"no-repeat")}return o}};e.Element.GradientBase.prototype=new e.Element.ElementBase;e.Element.linearGradient=function(t){this.base=e.Element.GradientBase;this.base(t);this.getGradient=function(e,t){var n=t.getBoundingBox();if(!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()){this.attribute("x1",true).value=0;this.attribute("y1",true).value=0;this.attribute("x2",true).value=1;this.attribute("y2",true).value=0}var r=this.gradientUnits=="objectBoundingBox"?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x");var i=this.gradientUnits=="objectBoundingBox"?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y");var s=this.gradientUnits=="objectBoundingBox"?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x");var o=this.gradientUnits=="objectBoundingBox"?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");if(r==s&&i==o)return null;return e.createLinearGradient(r,i,s,o)}};e.Element.linearGradient.prototype=new e.Element.GradientBase;e.Element.radialGradient=function(t){this.base=e.Element.GradientBase;this.base(t);this.getGradient=function(e,t){var n=t.getBoundingBox();if(!this.attribute("cx").hasValue())this.attribute("cx",true).value="50%";if(!this.attribute("cy").hasValue())this.attribute("cy",true).value="50%";if(!this.attribute("r").hasValue())this.attribute("r",true).value="50%";var r=this.gradientUnits=="objectBoundingBox"?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x");var i=this.gradientUnits=="objectBoundingBox"?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y");var s=r;var o=i;if(this.attribute("fx").hasValue()){s=this.gradientUnits=="objectBoundingBox"?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")}if(this.attribute("fy").hasValue()){o=this.gradientUnits=="objectBoundingBox"?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y")}var u=this.gradientUnits=="objectBoundingBox"?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return e.createRadialGradient(s,o,0,r,i,u)}};e.Element.radialGradient.prototype=new e.Element.GradientBase;e.Element.stop=function(t){this.base=e.Element.ElementBase;this.base(t);this.offset=this.attribute("offset").numValue();if(this.offset<0)this.offset=0;if(this.offset>1)this.offset=1;var n=this.style("stop-color");if(this.style("stop-opacity").hasValue())n=n.addOpacity(this.style("stop-opacity").value);this.color=n.value};e.Element.stop.prototype=new e.Element.ElementBase;e.Element.AnimateBase=function(t){this.base=e.Element.ElementBase;this.base(t);e.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var e=this.attribute("attributeType").value;var t=this.attribute("attributeName").value;if(e=="CSS"){return this.parent.style(t,true)}return this.parent.attribute(t,true)};this.initialValue=null;this.initialUnits="";this.removed=false;this.calcValue=function(){return""};this.update=function(e){if(this.initialValue==null){this.initialValue=this.getProperty().value;this.initialUnits=this.getProperty().getUnits()}if(this.duration>this.maxDuration){if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite"){this.duration=0}else if(this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed){this.removed=true;this.getProperty().value=this.initialValue;return true}else{return false}}this.duration=this.duration+e;var t=false;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var r=this.attribute("type").value;n=r+"("+n+")"}this.getProperty().value=n;t=true}return t};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");if(this.values.hasValue())this.values.value=this.values.value.split(";");this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=t.progress*(this.values.value.length-1);var r=Math.floor(n),i=Math.ceil(n);t.from=new e.Property("from",parseFloat(this.values.value[r]));t.to=new e.Property("to",parseFloat(this.values.value[i]));t.progress=(n-r)/(i-r)}else{t.from=this.from;t.to=this.to}return t}};e.Element.AnimateBase.prototype=new e.Element.ElementBase;e.Element.animate=function(t){this.base=e.Element.AnimateBase;this.base(t);this.calcValue=function(){var e=this.progress();var t=e.from.numValue()+(e.to.numValue()-e.from.numValue())*e.progress;return t+this.initialUnits}};e.Element.animate.prototype=new e.Element.AnimateBase;e.Element.animateColor=function(t){this.base=e.Element.AnimateBase;this.base(t);this.calcValue=function(){var e=this.progress();var t=new RGBColor(e.from.value);var n=new RGBColor(e.to.value);if(t.ok&&n.ok){var r=t.r+(n.r-t.r)*e.progress;var i=t.g+(n.g-t.g)*e.progress;var s=t.b+(n.b-t.b)*e.progress;return"rgb("+parseInt(r,10)+","+parseInt(i,10)+","+parseInt(s,10)+")"}return this.attribute("from").value}};e.Element.animateColor.prototype=new e.Element.AnimateBase;e.Element.animateTransform=function(t){this.base=e.Element.AnimateBase;this.base(t);this.calcValue=function(){var t=this.progress();var n=e.ToNumberArray(t.from.value);var r=e.ToNumberArray(t.to.value);var i="";for(var s=0;s<n.length;s++){i+=n[s]+(r[s]-n[s])*t.progress+" "}return i}};e.Element.animateTransform.prototype=new e.Element.animate;e.Element.font=function(t){this.base=e.Element.ElementBase;this.base(t);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isRTL=false;this.isArabic=false;this.fontFace=null;this.missingGlyph=null;this.glyphs=[];for(var n=0;n<this.children.length;n++){var r=this.children[n];if(r.type=="font-face"){this.fontFace=r;if(r.style("font-family").hasValue()){e.Definitions[r.style("font-family").value]=this}}else if(r.type=="missing-glyph")this.missingGlyph=r;else if(r.type=="glyph"){if(r.arabicForm!=""){this.isRTL=true;this.isArabic=true;if(typeof this.glyphs[r.unicode]=="undefined")this.glyphs[r.unicode]=[];this.glyphs[r.unicode][r.arabicForm]=r}else{this.glyphs[r.unicode]=r}}}};e.Element.font.prototype=new e.Element.ElementBase;e.Element.fontface=function(t){this.base=e.Element.ElementBase;this.base(t);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};e.Element.fontface.prototype=new e.Element.ElementBase;e.Element.missingglyph=function(t){this.base=e.Element.path;this.base(t);this.horizAdvX=0};e.Element.missingglyph.prototype=new e.Element.path;e.Element.glyph=function(t){this.base=e.Element.path;this.base(t);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};e.Element.glyph.prototype=new e.Element.path;e.Element.text=function(t){this.captureTextNodes=true;this.base=e.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(e){this.baseSetContext(e);if(this.style("dominant-baseline").hasValue())e.textBaseline=this.style("dominant-baseline").value;if(this.style("alignment-baseline").hasValue())e.textBaseline=this.style("alignment-baseline").value};this.getBoundingBox=function(){return new e.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)};this.renderChildren=function(e){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(e,this,0);for(var t=0;t<this.children.length;t++){this.renderChild(e,this,t)}};this.getAnchorDelta=function(e,t,n){var r=this.style("text-anchor").valueOrDefault("start");if(r!="start"){var i=0;for(var s=n;s<t.children.length;s++){var o=t.children[s];if(s>n&&o.attribute("x").hasValue())break;i+=o.measureTextRecursive(e)}return-1*(r=="end"?i:i/2)}return 0};this.renderChild=function(e,t,n){var r=t.children[n];if(r.attribute("x").hasValue()){r.x=r.attribute("x").toPixels("x")+this.getAnchorDelta(e,t,n)}else{if(this.attribute("dx").hasValue())this.x+=this.attribute("dx").toPixels("x");if(r.attribute("dx").hasValue())this.x+=r.attribute("dx").toPixels("x");r.x=this.x}this.x=r.x+r.measureText(e);if(r.attribute("y").hasValue()){r.y=r.attribute("y").toPixels("y")}else{if(this.attribute("dy").hasValue())this.y+=this.attribute("dy").toPixels("y");if(r.attribute("dy").hasValue())this.y+=r.attribute("dy").toPixels("y");r.y=this.y}this.y=r.y;r.render(e);for(var n=0;n<r.children.length;n++){this.renderChild(e,r,n)}}};e.Element.text.prototype=new e.Element.RenderedElementBase;e.Element.TextElementBase=function(t){this.base=e.Element.RenderedElementBase;this.base(t);this.getGlyph=function(e,t,n){var r=t[n];var i=null;if(e.isArabic){var s="isolated";if((n==0||t[n-1]==" ")&&n<t.length-2&&t[n+1]!=" ")s="terminal";if(n>0&&t[n-1]!=" "&&n<t.length-2&&t[n+1]!=" ")s="medial";if(n>0&&t[n-1]!=" "&&(n==t.length-1||t[n+1]==" "))s="initial";if(typeof e.glyphs[r]!="undefined"){i=e.glyphs[r][s];if(i==null&&e.glyphs[r].type=="glyph")i=e.glyphs[r]}}else{i=e.glyphs[r]}if(i==null)i=e.missingGlyph;return i};this.renderChildren=function(t){var n=this.parent.style("font-family").getDefinition();if(n!=null){var r=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);var i=this.parent.style("font-style").valueOrDefault(e.Font.Parse(e.ctx.font).fontStyle);var s=this.getText();if(n.isRTL)s=s.split("").reverse().join("");var o=e.ToNumberArray(this.parent.attribute("dx").value);for(var u=0;u<s.length;u++){var a=this.getGlyph(n,s,u);var f=r/n.fontFace.unitsPerEm;t.translate(this.x,this.y);t.scale(f,-f);var l=t.lineWidth;t.lineWidth=t.lineWidth*n.fontFace.unitsPerEm/r;if(i=="italic")t.transform(1,0,.4,1,0,0);a.render(t);if(i=="italic")t.transform(1,0,-.4,1,0,0);t.lineWidth=l;t.scale(1/f,-1/f);t.translate(-this.x,-this.y);this.x+=r*(a.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm;if(typeof o[u]!="undefined"&&!isNaN(o[u])){this.x+=o[u]}}return}if(t.fillStyle!="")t.fillText(e.compressSpaces(this.getText()),this.x,this.y);if(t.strokeStyle!="")t.strokeText(e.compressSpaces(this.getText()),this.x,this.y)};this.getText=function(){};this.measureTextRecursive=function(e){var t=this.measureText(e);for(var n=0;n<this.children.length;n++){t+=this.children[n].measureTextRecursive(e)}return t};this.measureText=function(t){var n=this.parent.style("font-family").getDefinition();if(n!=null){var r=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);var i=0;var s=this.getText();if(n.isRTL)s=s.split("").reverse().join("");var o=e.ToNumberArray(this.parent.attribute("dx").value);for(var u=0;u<s.length;u++){var a=this.getGlyph(n,s,u);i+=(a.horizAdvX||n.horizAdvX)*r/n.fontFace.unitsPerEm;if(typeof o[u]!="undefined"&&!isNaN(o[u])){i+=o[u]}}return i}var f=e.compressSpaces(this.getText());if(!t.measureText)return f.length*10;t.save();this.setContext(t);var l=t.measureText(f).width;t.restore();return l}};e.Element.TextElementBase.prototype=new e.Element.RenderedElementBase;e.Element.tspan=function(t){this.captureTextNodes=true;this.base=e.Element.TextElementBase;this.base(t);this.text=t.nodeValue||t.text||"";this.getText=function(){return this.text}};e.Element.tspan.prototype=new e.Element.TextElementBase;e.Element.tref=function(t){this.base=e.Element.TextElementBase;this.base(t);this.getText=function(){var e=this.getHrefAttribute().getDefinition();if(e!=null)return e.children[0].getText()}};e.Element.tref.prototype=new e.Element.TextElementBase;e.Element.a=function(t){this.base=e.Element.TextElementBase;this.base(t);this.hasText=true;for(var n=0;n<t.childNodes.length;n++){if(t.childNodes[n].nodeType!=3)this.hasText=false}this.text=this.hasText?t.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var n=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);e.Mouse.checkBoundingBox(this,new e.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(t),this.y))}else{var r=new e.Element.g;r.children=this.children;r.parent=this;r.render(t)}};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){e.ctx.canvas.style.cursor="pointer"}};e.Element.a.prototype=new e.Element.TextElementBase;e.Element.image=function(t){this.base=e.Element.RenderedElementBase;this.base(t);var n=this.getHrefAttribute().value;var r=n.match(/\.svg$/);e.Images.push(this);this.loaded=false;if(!r){this.img=document.createElement("img");var i=this;this.img.onload=function(){i.loaded=true};this.img.onerror=function(){if(typeof console!="undefined"){console.log('ERROR: image "'+n+'" not found');i.loaded=true}};this.img.src=n}else{this.img=e.ajax(n);this.loaded=true}this.renderChildren=function(t){var n=this.attribute("x").toPixels("x");var i=this.attribute("y").toPixels("y");var s=this.attribute("width").toPixels("x");var o=this.attribute("height").toPixels("y");if(s==0||o==0)return;t.save();if(r){t.drawSvg(this.img,n,i,s,o)}else{t.translate(n,i);e.AspectRatio(t,this.attribute("preserveAspectRatio").value,s,this.img.width,o,this.img.height,0,0);t.drawImage(this.img,0,0)}t.restore()};this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x");var n=this.attribute("y").toPixels("y");var r=this.attribute("width").toPixels("x");var i=this.attribute("height").toPixels("y");return new e.BoundingBox(t,n,t+r,n+i)}};e.Element.image.prototype=new e.Element.RenderedElementBase;e.Element.g=function(t){this.base=e.Element.RenderedElementBase;this.base(t);this.getBoundingBox=function(){var t=new e.BoundingBox;for(var n=0;n<this.children.length;n++){t.addBoundingBox(this.children[n].getBoundingBox())}return t}};e.Element.g.prototype=new e.Element.RenderedElementBase;e.Element.symbol=function(t){this.base=e.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(t){this.baseSetContext(t);if(this.attribute("viewBox").hasValue()){var n=e.ToNumberArray(this.attribute("viewBox").value);var r=n[0];var i=n[1];width=n[2];height=n[3];e.AspectRatio(t,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,r,i);e.ViewPort.SetCurrent(n[2],n[3])}}};e.Element.symbol.prototype=new e.Element.RenderedElementBase;e.Element.style=function(t){this.base=e.Element.ElementBase;this.base(t);var n="";for(var r=0;r<t.childNodes.length;r++){n+=t.childNodes[r].nodeValue}n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");n=e.compressSpaces(n);var i=n.split("}");for(var r=0;r<i.length;r++){if(e.trim(i[r])!=""){var s=i[r].split("{");var o=s[0].split(",");var u=s[1].split(";");for(var a=0;a<o.length;a++){var f=e.trim(o[a]);if(f!=""){var l={};for(var c=0;c<u.length;c++){var h=u[c].indexOf(":");var p=u[c].substr(0,h);var d=u[c].substr(h+1,u[c].length-h);if(p!=null&&d!=null){l[e.trim(p)]=new e.Property(e.trim(p),e.trim(d))}}e.Styles[f]=l;if(f=="@font-face"){var v=l["font-family"].value.replace(/"/g,"");var m=l["src"].value.split(",");for(var g=0;g<m.length;g++){if(m[g].indexOf('format("svg")')>0){var y=m[g].indexOf("url");var b=m[g].indexOf(")",y);var w=m[g].substr(y+5,b-y-6);var E=e.parseXml(e.ajax(w));var S=E.getElementsByTagName("font");for(var x=0;x<S.length;x++){var T=e.CreateElement(S[x]);e.Definitions[v]=T}}}}}}}}};e.Element.style.prototype=new e.Element.ElementBase;e.Element.use=function(t){this.base=e.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(e){this.baseSetContext(e);if(this.attribute("x").hasValue())e.translate(this.attribute("x").toPixels("x"),0);if(this.attribute("y").hasValue())e.translate(0,this.attribute("y").toPixels("y"))};this.getDefinition=function(){var e=this.getHrefAttribute().getDefinition();if(this.attribute("width").hasValue())e.attribute("width",true).value=this.attribute("width").value;if(this.attribute("height").hasValue())e.attribute("height",true).value=this.attribute("height").value;return e};this.path=function(e){var t=this.getDefinition();if(t!=null)t.path(e)};this.getBoundingBox=function(){var e=this.getDefinition();if(e!=null)return e.getBoundingBox()};this.renderChildren=function(e){var t=this.getDefinition();if(t!=null){var n=t.parent;t.parent=null;t.render(e);t.parent=n}}};e.Element.use.prototype=new e.Element.RenderedElementBase;e.Element.mask=function(t){this.base=e.Element.ElementBase;this.base(t);this.apply=function(t,n){var r=this.attribute("x").toPixels("x");var i=this.attribute("y").toPixels("y");var s=this.attribute("width").toPixels("x");var o=this.attribute("height").toPixels("y");if(s==0&&o==0){var u=new e.BoundingBox;for(var a=0;a<this.children.length;a++){u.addBoundingBox(this.children[a].getBoundingBox())}var r=Math.floor(u.x1);var i=Math.floor(u.y1);var s=Math.floor(u.width());var o=Math.floor(u.height())}var f=n.attribute("mask").value;n.attribute("mask").value="";var l=document.createElement("canvas");l.width=r+s;l.height=i+o;var c=l.getContext("2d");this.renderChildren(c);var h=document.createElement("canvas");h.width=r+s;h.height=i+o;var p=h.getContext("2d");n.render(p);p.globalCompositeOperation="destination-in";p.fillStyle=c.createPattern(l,"no-repeat");p.fillRect(0,0,r+s,i+o);t.fillStyle=p.createPattern(h,"no-repeat");t.fillRect(0,0,r+s,i+o);n.attribute("mask").value=f};this.render=function(e){}};e.Element.mask.prototype=new e.Element.ElementBase;e.Element.clipPath=function(t){this.base=e.Element.ElementBase;this.base(t);this.apply=function(t){for(var n=0;n<this.children.length;n++){var r=this.children[n];if(typeof r.path!="undefined"){var i=null;if(r.attribute("transform").hasValue()){i=new e.Transform(r.attribute("transform").value);i.apply(t)}r.path(t);t.clip();if(i){i.unapply(t)}}}};this.render=function(e){}};e.Element.clipPath.prototype=new e.Element.ElementBase;e.Element.filter=function(t){this.base=e.Element.ElementBase;this.base(t);this.apply=function(e,t){var n=t.getBoundingBox();var r=Math.floor(n.x1);var i=Math.floor(n.y1);var s=Math.floor(n.width());var o=Math.floor(n.height());var u=t.style("filter").value;t.style("filter").value="";var a=0,f=0;for(var l=0;l<this.children.length;l++){var c=this.children[l].extraFilterDistance||0;a=Math.max(a,c);f=Math.max(f,c)}var h=document.createElement("canvas");h.width=s+2*a;h.height=o+2*f;var p=h.getContext("2d");p.translate(-r+a,-i+f);t.render(p);for(var l=0;l<this.children.length;l++){this.children[l].apply(p,0,0,s+2*a,o+2*f)}e.drawImage(h,0,0,s+2*a,o+2*f,r-a,i-f,s+2*a,o+2*f);t.style("filter",true).value=u};this.render=function(e){}};e.Element.filter.prototype=new e.Element.ElementBase;e.Element.feMorphology=function(t){this.base=e.Element.ElementBase;this.base(t);this.apply=function(e,t,n,r,i){}};e.Element.feMorphology.prototype=new e.Element.ElementBase;e.Element.feColorMatrix=function(t){function n(e,t,n,r,i,s){return e[n*r*4+t*4+s]}function r(e,t,n,r,i,s,o){e[n*r*4+t*4+s]=o}this.base=e.Element.ElementBase;this.base(t);this.apply=function(e,t,i,s,o){var u=e.getImageData(0,0,s,o);for(var i=0;i<o;i++){for(var t=0;t<s;t++){var a=n(u.data,t,i,s,o,0);var f=n(u.data,t,i,s,o,1);var l=n(u.data,t,i,s,o,2);var c=(a+f+l)/3;r(u.data,t,i,s,o,0,c);r(u.data,t,i,s,o,1,c);r(u.data,t,i,s,o,2,c)}}e.clearRect(0,0,s,o);e.putImageData(u,0,0)}};e.Element.feColorMatrix.prototype=new e.Element.ElementBase;e.Element.feGaussianBlur=function(t){this.base=e.Element.ElementBase;this.base(t);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(t,n,r,i,s){if(typeof stackBlurCanvasRGBA=="undefined"){if(typeof console!="undefined"){console.log("ERROR: StackBlur.js must be included for blur to work")}return}t.canvas.id=e.UniqueId();t.canvas.style.display="none";document.body.appendChild(t.canvas);stackBlurCanvasRGBA(t.canvas.id,n,r,i,s,this.blurRadius);document.body.removeChild(t.canvas)}};e.Element.feGaussianBlur.prototype=new e.Element.ElementBase;e.Element.title=function(e){};e.Element.title.prototype=new e.Element.ElementBase;e.Element.desc=function(e){};e.Element.desc.prototype=new e.Element.ElementBase;e.Element.MISSING=function(e){if(typeof console!="undefined"){console.log("ERROR: Element '"+e.nodeName+"' not yet implemented.")}};e.Element.MISSING.prototype=new e.Element.ElementBase;e.CreateElement=function(t){var n=t.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var r=null;if(typeof e.Element[n]!="undefined"){r=new e.Element[n](t)}else{r=new e.Element.MISSING(t)}r.type=t.nodeName;return r};e.load=function(t,n){e.loadXml(t,e.ajax(n))};e.loadXml=function(t,n){e.loadXmlDoc(t,e.parseXml(n))};e.loadXmlDoc=function(t,n){e.init(t);var r=function(e){var n=t.canvas;while(n){e.x-=n.offsetLeft;e.y-=n.offsetTop;n=n.offsetParent}if(window.scrollX)e.x+=window.scrollX;if(window.scrollY)e.y+=window.scrollY;return e};if(e.opts["ignoreMouse"]!=true){t.canvas.onclick=function(t){var n=r(new e.Point(t!=null?t.clientX:event.clientX,t!=null?t.clientY:event.clientY));e.Mouse.onclick(n.x,n.y)};t.canvas.onmousemove=function(t){var n=r(new e.Point(t!=null?t.clientX:event.clientX,t!=null?t.clientY:event.clientY));e.Mouse.onmousemove(n.x,n.y)}}var i=e.CreateElement(n.documentElement);i.root=true;var s=true;var o=function(){e.ViewPort.Clear();if(t.canvas.parentNode)e.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight);if(e.opts["ignoreDimensions"]!=true){if(i.style("width").hasValue()){t.canvas.width=i.style("width").toPixels("x");t.canvas.style.width=t.canvas.width+"px"}if(i.style("height").hasValue()){t.canvas.height=i.style("height").toPixels("y");t.canvas.style.height=t.canvas.height+"px"}}var r=t.canvas.clientWidth||t.canvas.width;var o=t.canvas.clientHeight||t.canvas.height;if(e.opts["ignoreDimensions"]==true&&i.style("width").hasValue()&&i.style("height").hasValue()){r=i.style("width").toPixels("x");o=i.style("height").toPixels("y")}e.ViewPort.SetCurrent(r,o);if(e.opts["offsetX"]!=null)i.attribute("x",true).value=e.opts["offsetX"];if(e.opts["offsetY"]!=null)i.attribute("y",true).value=e.opts["offsetY"];if(e.opts["scaleWidth"]!=null&&e.opts["scaleHeight"]!=null){var u=1,a=1,f=e.ToNumberArray(i.attribute("viewBox").value);if(i.attribute("width").hasValue())u=i.attribute("width").toPixels("x")/e.opts["scaleWidth"];else if(!isNaN(f[2]))u=f[2]/e.opts["scaleWidth"];if(i.attribute("height").hasValue())a=i.attribute("height").toPixels("y")/e.opts["scaleHeight"];else if(!isNaN(f[3]))a=f[3]/e.opts["scaleHeight"];i.attribute("width",true).value=e.opts["scaleWidth"];i.attribute("height",true).value=e.opts["scaleHeight"];i.attribute("viewBox",true).value="0 0 "+r*u+" "+o*a;i.attribute("preserveAspectRatio",true).value="none"}if(e.opts["ignoreClear"]!=true){t.clearRect(0,0,r,o)}i.render(t);if(s){s=false;if(typeof e.opts["renderCallback"]=="function")e.opts["renderCallback"](n)}};var u=true;if(e.ImagesLoaded()){u=false;o()}e.intervalID=setInterval(function(){var t=false;if(u&&e.ImagesLoaded()){u=false;t=true}if(e.opts["ignoreMouse"]!=true){t=t|e.Mouse.hasEvents()}if(e.opts["ignoreAnimation"]!=true){for(var n=0;n<e.Animations.length;n++){t=t|e.Animations[n].update(1e3/e.FRAMERATE)}}if(typeof e.opts["forceRedraw"]=="function"){if(e.opts["forceRedraw"]()==true)t=true}if(t){o();e.Mouse.runEvents()}},1e3/e.FRAMERATE)};e.stop=function(){if(e.intervalID){clearInterval(e.intervalID)}};e.Mouse=new function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(e,t){this.events.push({type:"onclick",x:e,y:t,run:function(e){if(e.onclick)e.onclick()}})};this.onmousemove=function(e,t){this.events.push({type:"onmousemove",x:e,y:t,run:function(e){if(e.onmousemove)e.onmousemove()}})};this.eventElements=[];this.checkPath=function(e,t){for(var n=0;n<this.events.length;n++){var r=this.events[n];if(t.isPointInPath&&t.isPointInPath(r.x,r.y))this.eventElements[n]=e}};this.checkBoundingBox=function(e,t){for(var n=0;n<this.events.length;n++){var r=this.events[n];if(t.isPointInBox(r.x,r.y))this.eventElements[n]=e}};this.runEvents=function(){e.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++){var n=this.events[t];var r=this.eventElements[t];while(r){n.run(r);r=r.parent}}this.events=[];this.eventElements=[]}};return e}this.canvg=function(t,n,r){if(t==null&&n==null&&r==null){var i=document.getElementsByTagName("svg");for(var s=0;s<i.length;s++){var o=i[s];var u=document.createElement("canvas");u.width=o.clientWidth;u.height=o.clientHeight;o.parentNode.insertBefore(u,o);o.parentNode.removeChild(o);var a=document.createElement("div");a.appendChild(o);canvg(u,a.innerHTML)}return}r=r||{};if(typeof t=="string"){t=document.getElementById(t)}if(t.svg!=null)t.svg.stop();var f=e();if(!(t.childNodes.length==1&&t.childNodes[0].nodeName=="OBJECT"))t.svg=f;f.opts=r;var l=t.getContext("2d");if(typeof n.documentElement!="undefined"){f.loadXmlDoc(l,n)}else if(n.substr(0,1)=="<"){f.loadXml(l,n)}else{f.load(l,n)}}})();if(typeof CanvasRenderingContext2D!="undefined"){CanvasRenderingContext2D.prototype.drawSvg=function(e,t,n,r,i){canvg(this.canvas,e,{ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,offsetX:t,offsetY:n,scaleWidth:r,scaleHeight:i})}}var jsPDF=function(){"use strict";function n(r,i,s,o){if(typeof r==="undefined"){r="p"}else{r=r.toString().toLowerCase()}if(typeof i==="undefined"){i="mm"}if(typeof s==="undefined"){s="a4"}if(typeof o==="undefined"&&typeof zpipe==="undefined"){o=false}var u=s.toString().toLowerCase(),a="0.9.0rc2",f=[],l=0,c=o,h="1.3",p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224]},d="0 g",v="0 G",m=0,g=[],y=2,b=false,w=[],E={},S={},x=16,T,N=.200025,C=1.15,k,L,A,O={title:"",subject:"",author:"",keywords:"",creator:""},M=0,_=0,D={},P=new t(D),H,B,j=function(e){return e.toFixed(2)},F=function(e){return e.toFixed(3)},I=function(e){var t=e.toFixed(0);if(e<10){return"0"+t}else{return t}},q=function(e){var t=e.toFixed(0);if(t.length<10){return(new Array(11-t.length)).join("0")+t}else{return t}},R=function(e){if(b){g[m].push(e)}else{f.push(e);l+=e.length+1}},U=function(){y++;w[y]=l;R(y+" 0 obj");return y},z=function(e){R("stream");R(e);R("endstream")},W,X,V,$,J=function(){W=L*A;X=k*A;var e,t,n,r,i,s,o;for(e=1;e<=m;e++){U();R("<</Type /Page");R("/Parent 1 0 R");R("/Resources 2 0 R");R("/Contents "+(y+1)+" 0 R>>");R("endobj");t=g[e].join("\n");U();if(c){n=[];for(i=0;i<t.length;++i){n[i]=t.charCodeAt(i)}o=adler32cs.from(t);s=new Deflater(6);s.append(new Uint8Array(n));t=s.flush();n=[new Uint8Array([120,156]),new Uint8Array(t),new Uint8Array([o&255,o>>8&255,o>>16&255,o>>24&255])];t="";for(i in n){if(n.hasOwnProperty(i)){t+=String.fromCharCode.apply(null,n[i])}}R("<</Length "+t.length+" /Filter [/FlateDecode]>>")}else{R("<</Length "+t.length+">>")}z(t);R("endobj")}w[1]=l;R("1 0 obj");R("<</Type /Pages");V="/Kids [";for(i=0;i<m;i++){V+=3+2*i+" 0 R "}R(V+"]");R("/Count "+m);R("/MediaBox [0 0 "+j(W)+" "+j(X)+"]");R(">>");R("endobj")},K=function(e){e.objectNumber=U();R("<</BaseFont/"+e.PostScriptName+"/Type/Font");if(typeof e.encoding==="string"){R("/Encoding/"+e.encoding)}R("/Subtype/Type1>>");R("endobj")},Q=function(){var e;for(e in E){if(E.hasOwnProperty(e)){K(E[e])}}},G=function(){P.publish("putXobjectDict")},Y=function(){R("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");R("/Font <<");var e;for(e in E){if(E.hasOwnProperty(e)){R("/"+e+" "+E[e].objectNumber+" 0 R")}}R(">>");R("/XObject <<");G();R(">>")},Z=function(){Q();P.publish("putResources");w[2]=l;R("2 0 obj");R("<<");Y();R(">>");R("endobj");P.publish("postPutResources")},et=function(e,t,n){var r;if(S[t]===r){S[t]={}}S[t][n]=e},tt={},nt=function(t,n,r,i){var s="F"+(e(E)+1).toString(10),o=E[s]={id:s,PostScriptName:t,fontName:n,fontStyle:r,encoding:i,metadata:{}};et(s,n,r);P.publish("addFont",o);return s},rt=function(){var e="helvetica",t="times",n="courier",r="normal",i="bold",s="italic",o="bolditalic",u="StandardEncoding",a=[["Helvetica",e,r],["Helvetica-Bold",e,i],["Helvetica-Oblique",e,s],["Helvetica-BoldOblique",e,o],["Courier",n,r],["Courier-Bold",n,i],["Courier-Oblique",n,s],["Courier-BoldOblique",n,o],["Times-Roman",t,r],["Times-Bold",t,i],["Times-Italic",t,s],["Times-BoldItalic",t,o]],f,l,c,h;for(f=0,l=a.length;f<l;f++){c=nt(a[f][0],a[f][1],a[f][2],u);h=a[f][0].split("-");et(c,h[0],h[1]||"")}P.publish("addFonts",{fonts:E,dictionary:S})},it=function(e,t){var n,r,i,s,o,u,a,f,l,c;if(t===i){t={}}s=t.sourceEncoding?s:"Unicode";u=t.outputEncoding;if((t.autoencode||u)&&E[T].metadata&&E[T].metadata[s]&&E[T].metadata[s].encoding){o=E[T].metadata[s].encoding;if(!u&&E[T].encoding){u=E[T].encoding}if(!u&&o.codePages){u=o.codePages[0]}if(typeof u==="string"){u=o[u]}if(u){f=false;a=[];for(n=0,r=e.length;n<r;n++){l=u[e.charCodeAt(n)];if(l){a.push(String.fromCharCode(l))}else{a.push(e[n])}if(a[n].charCodeAt(0)>>8){f=true}}e=a.join("")}}n=e.length;while(f===i&&n!==0){if(e.charCodeAt(n-1)>>8){f=true}n--}if(!f){return e}else{a=t.noBOM?[]:[254,255];for(n=0,r=e.length;n<r;n++){l=e.charCodeAt(n);c=l>>8;if(c>>8){throw new Error("Character at position "+n.toString(10)+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE")}a.push(c);a.push(l-(c<<8))}return String.fromCharCode.apply(i,a)}},st=function(e,t){return it(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ot=function(){R("/Producer (jsPDF "+a+")");if(O.title){R("/Title ("+st(O.title)+")")}if(O.subject){R("/Subject ("+st(O.subject)+")")}if(O.author){R("/Author ("+st(O.author)+")")}if(O.keywords){R("/Keywords ("+st(O.keywords)+")")}if(O.creator){R("/Creator ("+st(O.creator)+")")}var e=new Date;R("/CreationDate (D:"+[e.getFullYear(),I(e.getMonth()+1),I(e.getDate()),I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join("")+")")},ut=function(){R("/Type /Catalog");R("/Pages 1 0 R");R("/OpenAction [3 0 R /FitH null]");R("/PageLayout /OneColumn");P.publish("putCatalog")},at=function(){R("/Size "+(y+1));R("/Root "+y+" 0 R");R("/Info "+(y-1)+" 0 R")},ft=function(){m++;b=true;g[m]=[]},lt=function(){ft();R(j(N*A)+" w");R(v);if(M!==0){R(M.toString(10)+" J")}if(_!==0){R(_.toString(10)+" j")}P.publish("addPage",{pageNumber:m})},ct=function(e,t){var n,r;if(e===r){e=E[T].fontName}if(t===r){t=E[T].fontStyle}try{n=S[e][t]}catch(i){n=r}if(!n){throw new Error("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts.")}return n},ht=function(){b=false;f=[];w=[];R("%PDF-"+h);J();Z();U();R("<<");ot();R(">>");R("endobj");U();R("<<");ut();R(">>");R("endobj");var e=l,t;R("xref");R("0 "+(y+1));R("0000000000 65535 f ");for(t=1;t<=y;t++){R(q(w[t])+" 00000 n ")}R("trailer");R("<<");at();R(">>");R("startxref");R(e);R("%%EOF");b=true;return f.join("\n")},pt=function(e){var t="S";if(e==="F"){t="f"}else if(e==="FD"||e==="DF"){t="B"}return t},dt=function(e,t){var n,r,i,s,o,u;switch(e){case n:return ht();case"save":if(navigator.getUserMedia){if(window.URL===undefined){return D.output("dataurlnewwindow")}else if(window.URL.createObjectURL===undefined){return D.output("dataurlnewwindow")}}r=ht();i=r.length;s=new Uint8Array(new ArrayBuffer(i));for(o=0;o<i;o++){s[o]=r.charCodeAt(o)}u=new Blob([s],{type:"application/pdf"});saveAs(u,t);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(ht());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(ht());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(ht()));break;default:throw new Error('Output type "'+e+'" is not supported.')}};if(i==="pt"){A=1}else if(i==="mm"){A=72/25.4}else if(i==="cm"){A=72/2.54}else if(i==="in"){A=72}else{throw"Invalid unit: "+i}if(p.hasOwnProperty(u)){k=p[u][1]/A;L=p[u][0]/A}else{try{k=s[1];L=s[0]}catch(vt){throw"Invalid format: "+s}}if(r==="p"||r==="portrait"){r="p";if(L>k){H=L;L=k;k=H}}else if(r==="l"||r==="landscape"){r="l";if(k>L){H=L;L=k;k=H}}else{throw"Invalid orientation: "+r}D.internal={pdfEscape:st,getStyle:pt,getFont:function(){return E[ct.apply(D,arguments)]},getFontSize:function(){return x},getLineHeight:function(){return x*C},btoa:btoa,write:function(e,t,n,r){R(arguments.length===1?e:Array.prototype.join.call(arguments," "))},getCoordinateString:function(e){return j(e*A)},getVerticalCoordinateString:function(e){return j((k-e)*A)},collections:{},newObject:U,putStream:z,events:P,scaleFactor:A,pageSize:{width:L,height:k},output:function(e,t){return dt(e,t)},getNumberOfPages:function(){return g.length-1},pages:g};D.addPage=function(){lt();return this};D.text=function(e,t,n,r){var i,s,o,u,a,f,l;if(typeof e==="number"){s=n;o=e;u=t;e=s;t=o;n=u}if(typeof e==="string"&&e.match(/[\n\r]/)){e=e.split(/\r\n|\r|\n/g)}if(typeof r==="undefined"){r={noBOM:true,autoencode:true}}else{if(r.noBOM===i){r.noBOM=true}if(r.autoencode===i){r.autoencode=true}}if(typeof e==="string"){f=st(e,r)}else if(e instanceof Array){a=e.concat();for(l=a.length-1;l!==-1;l--){a[l]=st(a[l],r)}f=a.join(") Tj\nT* (")}else{throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.')}R("BT\n/"+T+" "+x+" Tf\n"+x*C+" TL\n"+d+"\n"+j(t*A)+" "+j((k-n)*A)+" Td\n("+f+") Tj\nET");return this};D.line=function(e,t,n,r){R(j(e*A)+" "+j((k-t)*A)+" m "+j(n*A)+" "+j((k-r)*A)+" l S");return this};D.lines=function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;if(typeof e==="number"){u=n;a=e;f=t;e=u;t=a;n=f}i=pt(i);r=r===o?[1,1]:r;R(F(t*A)+" "+F((k-n)*A)+" m ");l=r[0];c=r[1];p=e.length;b=t;w=n;for(h=0;h<p;h++){d=e[h];if(d.length===2){b=d[0]*l+b;w=d[1]*c+w;R(F(b*A)+" "+F((k-w)*A)+" l")}else{v=d[0]*l+b;m=d[1]*c+w;g=d[2]*l+b;y=d[3]*c+w;b=d[4]*l+b;w=d[5]*c+w;R(F(v*A)+" "+F((k-m)*A)+" "+F(g*A)+" "+F((k-y)*A)+" "+F(b*A)+" "+F((k-w)*A)+" c")}}if(s==true){R(" h")}R(i);return this};D.rect=function(e,t,n,r,i){var s=pt(i);R([j(e*A),j((k-t)*A),j(n*A),j(-r*A),"re",s].join(" "));return this};D.triangle=function(e,t,n,r,i,s,o){this.lines([[n-e,r-t],[i-n,s-r],[e-i,t-s]],e,t,[1,1],o,true);return this};D.roundedRect=function(e,t,n,r,i,s,o){var u=4/3*(Math.SQRT2-1);this.lines([[n-2*i,0],[i*u,0,i,s-s*u,i,s],[0,r-2*s],[0,s*u,-(i*u),s,-i,s],[-n+2*i,0],[-(i*u),0,-i,-(s*u),-i,-s],[0,-r+2*s],[0,-(s*u),i*u,-s,i,-s]],e+i,t,[1,1],o);return this};D.ellipse=function(e,t,n,r,i){var s=pt(i),o=4/3*(Math.SQRT2-1)*n,u=4/3*(Math.SQRT2-1)*r;R([j((e+n)*A),j((k-t)*A),"m",j((e+n)*A),j((k-(t-u))*A),j((e+o)*A),j((k-(t-r))*A),j(e*A),j((k-(t-r))*A),"c"].join(" "));R([j((e-o)*A),j((k-(t-r))*A),j((e-n)*A),j((k-(t-u))*A),j((e-n)*A),j((k-t)*A),"c"].join(" "));R([j((e-n)*A),j((k-(t+u))*A),j((e-o)*A),j((k-(t+r))*A),j(e*A),j((k-(t+r))*A),"c"].join(" "));R([j((e+o)*A),j((k-(t+r))*A),j((e+n)*A),j((k-(t+u))*A),j((e+n)*A),j((k-t)*A),"c",s].join(" "));return this};D.circle=function(e,t,n,r){return this.ellipse(e,t,n,n,r)};D.setProperties=function(e){var t;for(t in O){if(O.hasOwnProperty(t)&&e[t]){O[t]=e[t]}}return this};D.setFontSize=function(e){x=e;return this};D.setFont=function(e,t){T=ct(e,t);return this};D.setFontStyle=D.setFontType=function(e){var t;T=ct(t,e);return this};D.getFontList=function(){var e={},t,n,r;for(t in S){if(S.hasOwnProperty(t)){e[t]=r=[];for(n in S[t]){if(S[t].hasOwnProperty(n)){r.push(n)}}}}return e};D.setLineWidth=function(e){R((e*A).toFixed(2)+" w");return this};D.setDrawColor=function(e,t,n,r){var i;if(t===undefined||r===undefined&&e===t===n){if(typeof e==="string"){i=e+" G"}else{i=j(e/255)+" G"}}else if(r===undefined){if(typeof e==="string"){i=[e,t,n,"RG"].join(" ")}else{i=[j(e/255),j(t/255),j(n/255),"RG"].join(" ")}}else{if(typeof e==="string"){i=[e,t,n,r,"K"].join(" ")}else{i=[j(e),j(t),j(n),j(r),"K"].join(" ")}}R(i);return this};D.setFillColor=function(e,t,n,r){var i;if(t===undefined||r===undefined&&e===t===n){if(typeof e==="string"){i=e+" g"}else{i=j(e/255)+" g"}}else if(r===undefined){if(typeof e==="string"){i=[e,t,n,"rg"].join(" ")}else{i=[j(e/255),j(t/255),j(n/255),"rg"].join(" ")}}else{if(typeof e==="string"){i=[e,t,n,r,"k"].join(" ")}else{i=[j(e),j(t),j(n),j(r),"k"].join(" ")}}R(i);return this};D.setTextColor=function(e,t,n){var r=/#[0-9A-Fa-f]{6}/;if(typeof e=="string"&&r.test(e)){var i=e.replace("#","");var s=parseInt(i,16);e=s>>16&255;t=s>>8&255;n=s&255}if(e===0&&t===0&&n===0||typeof t==="undefined"){d=F(e/255)+" g"}else{d=[F(e/255),F(t/255),F(n/255),"rg"].join(" ")}return this};D.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};D.setLineCap=function(e){var t=this.CapJoinStyles[e];if(t===undefined){throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}M=t;R(t.toString(10)+" J");return this};D.setLineJoin=function(e){var t=this.CapJoinStyles[e];if(t===undefined){throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}_=t;R(t.toString(10)+" j");return this};D.output=dt;D.save=function(e){D.output("save",e)};for(B in n.API){if(n.API.hasOwnProperty(B)){if(B==="events"&&n.API.events.length){(function(e,t){var n,r,i;for(i=t.length-1;i!==-1;i--){n=t[i][0];r=t[i][1];e.subscribe.apply(e,[n].concat(typeof r==="function"?[r]:r))}})(P,n.API.events)}else{D[B]=n.API[B]}}}rt();T="F1";lt();P.publish("initialized");return D}if(typeof btoa==="undefined"){window.btoa=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=t.split(""),r,i,s,o,u,a,f,l,c=0,h=0,p="",d=[],v;do{r=e.charCodeAt(c++);i=e.charCodeAt(c++);s=e.charCodeAt(c++);l=r<<16|i<<8|s;o=l>>18&63;u=l>>12&63;a=l>>6&63;f=l&63;d[h++]=n[o]+n[u]+n[a]+n[f]}while(c<e.length);p=d.join("");v=e.length%3;return(v?p.slice(0,v-3):p)+"===".slice(v||3)}}if(typeof atob==="undefined"){window.atob=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n,r,i,s,o,u,a,f,l=0,c=0,h="",p=[];if(!e){return e}e+="";do{s=t.indexOf(e.charAt(l++));o=t.indexOf(e.charAt(l++));u=t.indexOf(e.charAt(l++));a=t.indexOf(e.charAt(l++));f=s<<18|o<<12|u<<6|a;n=f>>16&255;r=f>>8&255;i=f&255;if(u===64){p[c++]=String.fromCharCode(n)}else if(a===64){p[c++]=String.fromCharCode(n,r)}else{p[c++]=String.fromCharCode(n,r,i)}}while(l<e.length);h=p.join("");return h}}var e=typeof Object.keys==="function"?function(e){return Object.keys(e).length}:function(e){var t=0,n;for(n in e){if(e.hasOwnProperty(n)){t++}}return t},t=function(e){this.topics={};this.context=e;this.publish=function(e,t){if(this.topics[e]){var n=this.topics[e],r=[],i,s,o,u,a=function(){};t=Array.prototype.slice.call(arguments,1);for(s=0,o=n.length;s<o;s++){u=n[s];i=u[0];if(u[1]){u[0]=a;r.push(s)}i.apply(this.context,t)}for(s=0,o=r.length;s<o;s++){n.splice(r[s],1)}}};this.subscribe=function(e,t,n){if(!this.topics[e]){this.topics[e]=[[t,n]]}else{this.topics[e].push([t,n])}return{topic:e,callback:t}};this.unsubscribe=function(e){if(this.topics[e.topic]){var t=this.topics[e.topic],n,r;for(n=0,r=t.length;n<r;n++){if(t[n][0]===e.callback){t.splice(n,1)}}}}};n.API={events:[]};return n}();(function(e){"use strict";var t="addImage_";var n=function(e){"use strict";var t,n;if(!e.charCodeAt(0)===255||!e.charCodeAt(1)===216||!e.charCodeAt(2)===255||!e.charCodeAt(3)===224||!e.charCodeAt(6)==="J".charCodeAt(0)||!e.charCodeAt(7)==="F".charCodeAt(0)||!e.charCodeAt(8)==="I".charCodeAt(0)||!e.charCodeAt(9)==="F".charCodeAt(0)||!e.charCodeAt(10)===0){throw new Error("getJpegSize requires a binary jpeg file")}var r=e.charCodeAt(4)*256+e.charCodeAt(5);var i=4,s=e.length;while(i<s){i+=r;if(e.charCodeAt(i)!==255){throw new Error("getJpegSize could not find the size of the image")}if(e.charCodeAt(i+1)===192||e.charCodeAt(i+1)===193||e.charCodeAt(i+1)===194||e.charCodeAt(i+1)===195||e.charCodeAt(i+1)===196||e.charCodeAt(i+1)===197||e.charCodeAt(i+1)===198||e.charCodeAt(i+1)===199){n=e.charCodeAt(i+5)*256+e.charCodeAt(i+6);t=e.charCodeAt(i+7)*256+e.charCodeAt(i+8);return[t,n]}else{i+=2;r=e.charCodeAt(i)*256+e.charCodeAt(i+1)}}},r=function(e){var t=this.internal.newObject(),n=this.internal.write,r=this.internal.putStream;e["n"]=t;n("<</Type /XObject");n("/Subtype /Image");n("/Width "+e["w"]);n("/Height "+e["h"]);if(e["cs"]==="Indexed"){n("/ColorSpace [/Indexed /DeviceRGB "+(e["pal"].length/3-1)+" "+(t+1)+" 0 R]")}else{n("/ColorSpace /"+e["cs"]);if(e["cs"]==="DeviceCMYK"){n("/Decode [1 0 1 0 1 0 1 0]")}}n("/BitsPerComponent "+e["bpc"]);if("f"in e){n("/Filter /"+e["f"])}if("dp"in e){n("/DecodeParms <<"+e["dp"]+">>")}if("trns"in e&&e["trns"].constructor==Array){var i="";for(var s=0;s<e["trns"].length;s++){i+=e[i][s]+" "+e["trns"][s]+" ";n("/Mask ["+i+"]")}}if("smask"in e){n("/SMask "+(t+1)+" 0 R")}n("/Length "+e["data"].length+">>");r(e["data"]);n("endobj")},i=function(){var e=this.internal.collections[t+"images"];for(var n in e){r.call(this,e[n])}},s=function(){var e=this.internal.collections[t+"images"],n=this.internal.write,r;for(var i in e){r=e[i];n("/I"+r["i"],r["n"],"0","R")}};e.addImage=function(e,r,o,u,a,f){"use strict";if(typeof e==="object"&&e.nodeType===1){var l=document.createElement("canvas");l.width=e.clientWidth;l.height=e.clientHeight;var c=l.getContext("2d");if(!c){throw"addImage requires canvas to be supported by browser."}c.drawImage(e,0,0,l.width,l.height);e=l.toDataURL("image/jpeg");r="JPEG"}if(r.toUpperCase()!=="JPEG"){throw new Error("addImage currently only supports format 'JPEG', not '"+r+"'")}var h,p=this.internal.collections[t+"images"],d=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;if(e.substring(0,23)==="data:image/jpeg;base64,"){e=atob(e.replace("data:image/jpeg;base64,",""))}if(p){h=Object.keys?Object.keys(p).length:function(e){var t=0;for(var n in e){if(e.hasOwnProperty(n)){t++}}return t}(p)}else{h=0;this.internal.collections[t+"images"]=p={};this.internal.events.subscribe("putResources",i);this.internal.events.subscribe("putXobjectDict",s)}var m=n(e);var g={w:m[0],h:m[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:h,data:e};p[h]=g;if(!a&&!f){a=-96;f=-96}if(a<0){a=-1*g["w"]*72/a/this.internal.scaleFactor}if(f<0){f=-1*g["h"]*72/f/this.internal.scaleFactor}if(a===0){a=f*g["w"]/g["h"]}if(f===0){f=a*g["h"]/g["w"]}this.internal.write("q",d(a),"0 0",d(f),d(o),v(u+f),"cm /I"+g["i"],"Do Q");return this}})(jsPDF.API)